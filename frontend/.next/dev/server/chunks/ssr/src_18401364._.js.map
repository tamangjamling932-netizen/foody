{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/trish/Documents/joseph/foody/frontend/src/lib/currency.ts"],"sourcesContent":["// Nepali Rupee currency formatter\nexport const CURRENCY_SYMBOL = \"₨\"; // Nepali Rupee Symbol\nexport const CURRENCY_CODE = \"NPR\";\n\nexport function formatCurrency(amount: number): string {\n  return `${CURRENCY_SYMBOL} ${amount.toFixed(2)}`;\n}\n\nexport function formatCurrencyCompact(amount: number): string {\n  return `${CURRENCY_SYMBOL}${amount.toFixed(2)}`;\n}\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;;;;;;AAC3B,MAAM,kBAAkB,KAAK,sBAAsB;AACnD,MAAM,gBAAgB;AAEtB,SAAS,eAAe,MAAc;IAC3C,OAAO,GAAG,gBAAgB,CAAC,EAAE,OAAO,OAAO,CAAC,IAAI;AAClD;AAEO,SAAS,sBAAsB,MAAc;IAClD,OAAO,GAAG,kBAAkB,OAAO,OAAO,CAAC,IAAI;AACjD"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/trish/Documents/joseph/foody/frontend/src/schemas/review.schema.ts"],"sourcesContent":["import { z } from \"zod\";\n\nexport const reviewSchema = z.object({\n  comment: z.string().max(500, \"Comment cannot exceed 500 characters\").optional(),\n});\n\nexport type ReviewInput = z.infer<typeof reviewSchema>;\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,eAAe,kLAAC,CAAC,MAAM,CAAC;IACnC,SAAS,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,KAAK,wCAAwC,QAAQ;AAC/E"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/trish/Documents/joseph/foody/frontend/src/app/%28dashboard%29/%28customer%29/menu/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport API, { getImageUrl } from \"@/lib/api\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { Product } from \"@/types\";\nimport toast from \"react-hot-toast\";\nimport {\n  FiArrowLeft,\n  FiStar,\n  FiShoppingCart,\n  FiMinus,\n  FiPlus,\n  FiSend,\n  FiUser,\n  FiEdit2,\n  FiTrash2,\n  FiCheckCircle,\n  FiChevronDown,\n} from \"react-icons/fi\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { reviewSchema, ReviewInput } from \"@/schemas/review.schema\";\nimport { Review } from \"@/types\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ntype SortOption = \"newest\" | \"highest\" | \"lowest\";\n\nfunction StarRow({ count, total, star }: { count: number; total: number; star: number }) {\n  const pct = total > 0 ? Math.round((count / total) * 100) : 0;\n  return (\n    <div className=\"flex items-center gap-2 text-xs\">\n      <span className=\"w-4 text-right text-gray-500\">{star}</span>\n      <FiStar size={10} className=\"fill-yellow-400 text-yellow-400 shrink-0\" />\n      <div className=\"flex-1 h-1.5 bg-gray-100 rounded-full overflow-hidden\">\n        <div className=\"h-full bg-yellow-400 rounded-full transition-all\" style={{ width: `${pct}%` }} />\n      </div>\n      <span className=\"w-6 text-right text-gray-400\">{count}</span>\n    </div>\n  );\n}\n\nfunction StarSelector({\n  value,\n  hover,\n  onChange,\n  onHover,\n}: {\n  value: number;\n  hover: number;\n  onChange: (v: number) => void;\n  onHover: (v: number) => void;\n}) {\n  const labels = [\"\", \"Poor\", \"Fair\", \"Good\", \"Very Good\", \"Excellent\"];\n  const active = hover || value;\n  return (\n    <div className=\"flex items-center gap-1\">\n      {[1, 2, 3, 4, 5].map((s) => (\n        <button\n          key={s}\n          type=\"button\"\n          onClick={() => onChange(s)}\n          onMouseEnter={() => onHover(s)}\n          onMouseLeave={() => onHover(0)}\n          className=\"focus:outline-none transition-transform hover:scale-110\"\n        >\n          <FiStar\n            size={26}\n            className={`transition-colors ${\n              s <= active ? \"fill-yellow-400 text-yellow-400\" : \"text-gray-300\"\n            }`}\n          />\n        </button>\n      ))}\n      {active > 0 && (\n        <span className=\"ml-1 text-sm font-medium text-gray-600\">{labels[active]}</span>\n      )}\n    </div>\n  );\n}\n\nexport default function ProductDetailPage() {\n  const params = useParams();\n  const router = useRouter();\n  const { user } = useAuth();\n  const id = params.id as string;\n\n  const [product, setProduct] = useState<Product | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [quantity, setQuantity] = useState(1);\n  const [addingToCart, setAddingToCart] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(\"\");\n\n  // Reviews state\n  const [reviews, setReviews] = useState<Review[]>([]);\n  const [reviewsLoading, setReviewsLoading] = useState(true);\n  const [myReview, setMyReview] = useState<Review | null>(null);\n  const [canReview, setCanReview] = useState(false);\n  const [submittingReview, setSubmittingReview] = useState(false);\n  const [selectedRating, setSelectedRating] = useState(0);\n  const [hoverRating, setHoverRating] = useState(0);\n  const [sortBy, setSortBy] = useState<SortOption>(\"newest\");\n  const [editingReview, setEditingReview] = useState(false);\n  const [editRating, setEditRating] = useState(0);\n  const [editHover, setEditHover] = useState(0);\n  const [deletingReview, setDeletingReview] = useState(false);\n  const [reviewPage, setReviewPage] = useState(1);\n  const [reviewPagination, setReviewPagination] = useState({ total: 0, pages: 1 });\n\n  const { register: regReview, handleSubmit: handleReview, formState: { errors: reviewErrors }, reset: resetReview } = useForm<ReviewInput>({\n    resolver: zodResolver(reviewSchema),\n  });\n  const { register: regEdit, handleSubmit: handleEdit, formState: { errors: editErrors }, reset: resetEdit, setValue: setEditValue } = useForm<ReviewInput>({\n    resolver: zodResolver(reviewSchema),\n  });\n\n  useEffect(() => {\n    if (id) fetchProduct();\n  }, [id]);\n\n  const fetchProduct = async () => {\n    setLoading(true);\n    try {\n      const res = await API.get(`/products/${id}`);\n      const prod = res.data.product || res.data;\n      setProduct(prod);\n      setSelectedImage(prod.image || \"\");\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || \"Failed to load product\");\n      router.push(\"/menu\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchReviews = useCallback(async (page = 1) => {\n    if (!id) return;\n    setReviewsLoading(true);\n    try {\n      const res = await API.get(`/reviews/product/${id}`, { params: { page, limit: 5 } });\n      const data = res.data.reviews || [];\n      setReviews(data);\n      if (res.data.pagination) {\n        setReviewPagination({ total: res.data.pagination.total, pages: res.data.pagination.pages });\n      }\n      if (user) {\n        const existing = data.find((r: Review) => {\n          const ru = typeof r.user === \"object\" ? r.user._id : r.user;\n          return ru === user._id;\n        });\n        if (existing) setMyReview(existing);\n      }\n    } catch {}\n    setReviewsLoading(false);\n  }, [id, user]);\n\n  useEffect(() => {\n    fetchReviews(reviewPage);\n  }, [reviewPage, fetchReviews]);\n\n  useEffect(() => {\n    if (user && id) {\n      API.get(\"/orders/my-orders\").then((res) => {\n        const orders = res.data.orders || [];\n        const hasCompleted = orders.some((o: any) =>\n          [\"completed\", \"served\"].includes(o.status) &&\n          o.items.some((i: any) => i.product === id)\n        );\n        setCanReview(hasCompleted);\n      }).catch(() => {});\n    }\n  }, [id, user]);\n\n  const handleAddToCart = async () => {\n    if (!product) return;\n    setAddingToCart(true);\n    try {\n      await API.post(\"/cart/add\", { productId: product._id, quantity });\n      toast.success(`${product.name} added to cart!`);\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || \"Failed to add to cart\");\n    } finally {\n      setAddingToCart(false);\n    }\n  };\n\n  const onReviewSubmit = async (data: ReviewInput) => {\n    if (selectedRating === 0) {\n      toast.error(\"Please select a rating\");\n      return;\n    }\n    try {\n      setSubmittingReview(true);\n      const res = await API.post(`/reviews/product/${id}`, {\n        rating: selectedRating,\n        comment: data.comment || \"\",\n      });\n      setMyReview(res.data.review);\n      resetReview();\n      setSelectedRating(0);\n      toast.success(\"Review submitted!\");\n      setReviewPage(1);\n      await fetchReviews(1);\n      const prodRes = await API.get(`/products/${id}`);\n      setProduct(prodRes.data.product);\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || \"Failed to submit review\");\n    } finally {\n      setSubmittingReview(false);\n    }\n  };\n\n  const startEditReview = () => {\n    if (!myReview) return;\n    setEditRating(myReview.rating);\n    setEditValue(\"comment\", myReview.comment || \"\");\n    setEditingReview(true);\n  };\n\n  const onEditSubmit = async (data: ReviewInput) => {\n    if (!myReview) return;\n    if (editRating === 0) { toast.error(\"Please select a rating\"); return; }\n    try {\n      setSubmittingReview(true);\n      const res = await API.put(`/reviews/${myReview._id}`, {\n        rating: editRating,\n        comment: data.comment || \"\",\n      });\n      const updated = res.data.review;\n      setMyReview(updated);\n      setReviews((prev) => prev.map((r) => r._id === updated._id ? updated : r));\n      setEditingReview(false);\n      resetEdit();\n      toast.success(\"Review updated!\");\n      const prodRes = await API.get(`/products/${id}`);\n      setProduct(prodRes.data.product);\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || \"Failed to update review\");\n    } finally {\n      setSubmittingReview(false);\n    }\n  };\n\n  const handleDeleteReview = async () => {\n    if (!myReview) return;\n    if (!confirm(\"Delete your review?\")) return;\n    setDeletingReview(true);\n    try {\n      await API.delete(`/reviews/${myReview._id}`);\n      setMyReview(null);\n      setReviews((prev) => prev.filter((r) => r._id !== myReview._id));\n      setCanReview(true);\n      toast.success(\"Review deleted\");\n      const prodRes = await API.get(`/products/${id}`);\n      setProduct(prodRes.data.product);\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || \"Failed to delete review\");\n    } finally {\n      setDeletingReview(false);\n    }\n  };\n\n  const getCategoryName = (): string => {\n    if (!product) return \"\";\n    if (typeof product.category === \"object\" && product.category !== null) {\n      return product.category.name;\n    }\n    return \"\";\n  };\n\n  const allImages = product\n    ? [product.image, ...(product.images || [])].filter(Boolean)\n    : [];\n\n  // Rating distribution\n  const ratingDist: Record<number, number> = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\n  reviews.forEach((r) => { if (r.rating >= 1 && r.rating <= 5) ratingDist[r.rating]++; });\n\n  // Sorted reviews (client-side within current page)\n  const sortedReviews = [...reviews].sort((a, b) => {\n    if (sortBy === \"highest\") return b.rating - a.rating;\n    if (sortBy === \"lowest\") return a.rating - b.rating;\n    return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n  });\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"h-6 w-32 rounded bg-gray-200 animate-pulse\" />\n        <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-2\">\n          <div className=\"h-96 rounded-xl bg-gray-200 animate-pulse\" />\n          <div className=\"space-y-4\">\n            <div className=\"h-8 w-3/4 rounded bg-gray-200 animate-pulse\" />\n            <div className=\"h-4 w-1/4 rounded bg-gray-200 animate-pulse\" />\n            <div className=\"h-20 w-full rounded bg-gray-200 animate-pulse\" />\n            <div className=\"h-10 w-32 rounded bg-gray-200 animate-pulse\" />\n            <div className=\"h-12 w-48 rounded bg-gray-200 animate-pulse\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className=\"py-20 text-center\">\n        <p className=\"text-lg text-gray-500\">Product not found.</p>\n        <Link\n          href=\"/menu\"\n          className=\"mt-4 inline-flex items-center gap-2 text-[#c47a5a] hover:underline\"\n        >\n          <FiArrowLeft className=\"h-4 w-4\" />\n          Back to Menu\n        </Link>\n      </div>\n    );\n  }\n\n  const displayPrice = product.finalPrice ?? product.price;\n  const hasDiscount = product.discountType && product.discountType !== \"none\";\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Back Link */}\n      <Link\n        href=\"/menu\"\n        className=\"inline-flex items-center gap-2 text-sm font-medium text-gray-500 transition-colors hover:text-[#c47a5a]\"\n      >\n        <FiArrowLeft className=\"h-4 w-4\" />\n        Back to Menu\n      </Link>\n\n      <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-2\">\n        {/* Image Section */}\n        <div className=\"space-y-4\">\n          <div className=\"relative h-80 w-full overflow-hidden rounded-xl bg-gray-100 sm:h-96\">\n            <Image\n              src={getImageUrl(selectedImage)}\n              alt={product.name}\n              width={800}\n              height={600}\n              unoptimized\n              className=\"h-full w-full object-cover\"\n            />\n            {/* Veg/Non-veg Badge */}\n            <span\n              className={`absolute left-3 top-3 inline-flex h-6 w-6 items-center justify-center rounded-sm border-2 bg-white ${\n                product.isVeg ? \"border-green-500\" : \"border-red-500\"\n              }`}\n            >\n              <span\n                className={`h-2.5 w-2.5 rounded-full ${\n                  product.isVeg ? \"bg-green-500\" : \"bg-red-500\"\n                }`}\n              />\n            </span>\n\n            {/* Promotional badges */}\n            <div className=\"absolute right-3 top-3 flex flex-col gap-1 items-end\">\n              {product.isHotDeal && (\n                <span className=\"rounded-full bg-red-500 px-2.5 py-0.5 text-xs font-bold text-white\">Hot Deal</span>\n              )}\n              {product.isFeatured && (\n                <span className=\"rounded-full bg-yellow-500 px-2.5 py-0.5 text-xs font-bold text-white\">Featured</span>\n              )}\n              {product.isChefSpecial && (\n                <span className=\"rounded-full bg-purple-500 px-2.5 py-0.5 text-xs font-bold text-white\">Chef's Special</span>\n              )}\n              {product.isDailySpecial && (\n                <span className=\"rounded-full bg-blue-500 px-2.5 py-0.5 text-xs font-bold text-white\">Today's Special</span>\n              )}\n            </div>\n\n            {!product.isAvailable && (\n              <div className=\"absolute inset-0 flex items-center justify-center bg-black/50\">\n                <span className=\"rounded-full bg-white px-4 py-2 text-sm font-semibold text-gray-700\">\n                  Currently Unavailable\n                </span>\n              </div>\n            )}\n          </div>\n\n          {/* Thumbnail Gallery */}\n          {allImages.length > 1 && (\n            <div className=\"flex gap-2 overflow-x-auto pb-1\">\n              {allImages.map((img, i) => (\n                <button\n                  key={i}\n                  onClick={() => setSelectedImage(img)}\n                  className={`shrink-0 h-16 w-16 overflow-hidden rounded-lg border-2 transition-colors ${\n                    selectedImage === img\n                      ? \"border-[#c47a5a]\"\n                      : \"border-transparent hover:border-gray-300\"\n                  }`}\n                >\n                  <Image\n                    src={getImageUrl(img)}\n                    alt={`${product.name} ${i + 1}`}\n                    width={64}\n                    height={64}\n                    unoptimized\n                    className=\"h-full w-full object-cover\"\n                  />\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Product Info */}\n        <div className=\"space-y-5\">\n          {/* Name & Category */}\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-800 sm:text-3xl\">\n              {product.name}\n            </h1>\n            {getCategoryName() && (\n              <p className=\"mt-1 text-sm text-gray-400\">{getCategoryName()}</p>\n            )}\n          </div>\n\n          {/* Rating Summary */}\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex items-center gap-0.5\">\n              {Array.from({ length: 5 }).map((_, i) => (\n                <FiStar\n                  key={i}\n                  className={`h-4 w-4 ${\n                    i < Math.round(product.rating)\n                      ? \"fill-yellow-400 text-yellow-400\"\n                      : \"text-gray-300\"\n                  }`}\n                />\n              ))}\n            </div>\n            <span className=\"text-sm font-semibold text-gray-700\">\n              {product.rating.toFixed(1)}\n            </span>\n            <span className=\"text-sm text-gray-400\">\n              ({product.numReviews} review{product.numReviews !== 1 ? \"s\" : \"\"})\n            </span>\n          </div>\n\n          {/* Veg/Non-veg */}\n          <div className=\"flex items-center gap-2\">\n            <span\n              className={`inline-flex h-5 w-5 items-center justify-center rounded-sm border-2 ${\n                product.isVeg ? \"border-green-500\" : \"border-red-500\"\n              }`}\n            >\n              <span className={`h-2 w-2 rounded-full ${product.isVeg ? \"bg-green-500\" : \"bg-red-500\"}`} />\n            </span>\n            <span className={`text-sm font-medium ${product.isVeg ? \"text-green-600\" : \"text-red-600\"}`}>\n              {product.isVeg ? \"Vegetarian\" : \"Non-Vegetarian\"}\n            </span>\n          </div>\n\n          {/* Price */}\n          <div className=\"flex items-baseline gap-3\">\n            <p className=\"text-3xl font-bold text-gray-800\">\n              {formatCurrency(displayPrice)}\n            </p>\n            {hasDiscount && product.price !== displayPrice && (\n              <p className=\"text-lg text-gray-400 line-through\">{formatCurrency(product.price)}</p>\n            )}\n            {hasDiscount && product.offerLabel && (\n              <span className=\"rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-semibold text-red-700\">\n                {product.offerLabel}\n              </span>\n            )}\n          </div>\n\n          {/* Description */}\n          {product.description && (\n            <div>\n              <h3 className=\"text-sm font-semibold text-gray-700\">Description</h3>\n              <p className=\"mt-1 text-sm leading-relaxed text-gray-500\">\n                {product.description}\n              </p>\n            </div>\n          )}\n\n          {/* Quantity Selector */}\n          <div className=\"flex items-center gap-4\">\n            <span className=\"text-sm font-medium text-gray-700\">Quantity:</span>\n            <div className=\"flex items-center rounded-lg border border-gray-200\">\n              <button\n                onClick={() => setQuantity((q) => Math.max(1, q - 1))}\n                disabled={quantity <= 1}\n                className=\"flex h-10 w-10 items-center justify-center text-gray-600 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-40\"\n              >\n                <FiMinus className=\"h-4 w-4\" />\n              </button>\n              <span className=\"flex h-10 w-12 items-center justify-center border-x border-gray-200 text-sm font-semibold text-gray-800\">\n                {quantity}\n              </span>\n              <button\n                onClick={() => setQuantity((q) => Math.min(20, q + 1))}\n                disabled={quantity >= 20}\n                className=\"flex h-10 w-10 items-center justify-center text-gray-600 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-40\"\n              >\n                <FiPlus className=\"h-4 w-4\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Add to Cart */}\n          <button\n            onClick={handleAddToCart}\n            disabled={!product.isAvailable || addingToCart}\n            className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-[#c47a5a] px-6 py-3.5 text-base font-semibold text-white transition-colors hover:bg-[#b56a4a] disabled:cursor-not-allowed disabled:opacity-50 sm:w-auto\"\n          >\n            {addingToCart ? (\n              <span className=\"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent\" />\n            ) : (\n              <FiShoppingCart className=\"h-5 w-5\" />\n            )}\n            {addingToCart\n              ? \"Adding...\"\n              : !product.isAvailable\n              ? \"Unavailable\"\n              : \"Add to Cart\"}\n          </button>\n        </div>\n      </div>\n\n      {/* ───── Reviews Section ───── */}\n      <div className=\"rounded-xl bg-white shadow-sm overflow-hidden\">\n        <div className=\"px-6 pt-6 pb-4 border-b border-gray-100\">\n          <h2 className=\"text-xl font-bold text-gray-800\">Reviews & Ratings</h2>\n        </div>\n\n        {/* Rating Overview */}\n        {product.numReviews > 0 && (\n          <div className=\"px-6 py-5 flex flex-col sm:flex-row gap-6 border-b border-gray-100 bg-gray-50\">\n            {/* Big Score */}\n            <div className=\"flex flex-col items-center justify-center min-w-[100px]\">\n              <span className=\"text-5xl font-extrabold text-gray-800\">{product.rating.toFixed(1)}</span>\n              <div className=\"flex mt-1\">\n                {[1,2,3,4,5].map((s) => (\n                  <FiStar key={s} size={16} className={s <= Math.round(product.rating) ? \"fill-yellow-400 text-yellow-400\" : \"text-gray-300\"} />\n                ))}\n              </div>\n              <span className=\"mt-1 text-xs text-gray-400\">{product.numReviews} review{product.numReviews !== 1 ? \"s\" : \"\"}</span>\n            </div>\n            {/* Distribution bars */}\n            <div className=\"flex-1 flex flex-col justify-center gap-1.5\">\n              {[5,4,3,2,1].map((star) => (\n                <StarRow key={star} star={star} count={ratingDist[star]} total={reviews.length} />\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"px-6 py-5 space-y-6\">\n          {/* Write Review Form */}\n          {user && canReview && !myReview && (\n            <div className=\"border border-gray-100 rounded-xl p-5 bg-gray-50\">\n              <h3 className=\"text-sm font-semibold text-gray-800 mb-4\">Share Your Experience</h3>\n              <form onSubmit={handleReview(onReviewSubmit)} className=\"space-y-4\">\n                <StarSelector\n                  value={selectedRating}\n                  hover={hoverRating}\n                  onChange={setSelectedRating}\n                  onHover={setHoverRating}\n                />\n                <textarea\n                  {...regReview(\"comment\")}\n                  placeholder=\"Tell others what you think about this dish... (optional)\"\n                  rows={3}\n                  className=\"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#c47a5a]/20 focus:border-[#c47a5a] resize-none text-sm\"\n                />\n                {reviewErrors.comment && (\n                  <p className=\"text-red-500 text-xs\">{reviewErrors.comment.message}</p>\n                )}\n                <button\n                  type=\"submit\"\n                  disabled={submittingReview || selectedRating === 0}\n                  className=\"flex items-center gap-2 px-5 py-2 bg-[#c47a5a] text-white rounded-lg text-sm font-medium hover:bg-[#b56a4a] disabled:opacity-50 transition-colors\"\n                >\n                  <FiSend size={14} />\n                  {submittingReview ? \"Submitting...\" : \"Submit Review\"}\n                </button>\n              </form>\n            </div>\n          )}\n\n          {/* My Review Card */}\n          {myReview && (\n            <div className=\"border border-[#c47a5a]/25 rounded-xl p-5 bg-[#c47a5a]/5\">\n              {editingReview ? (\n                <form onSubmit={handleEdit(onEditSubmit)} className=\"space-y-3\">\n                  <p className=\"text-sm font-semibold text-gray-700 mb-1\">Edit Your Review</p>\n                  <StarSelector\n                    value={editRating}\n                    hover={editHover}\n                    onChange={setEditRating}\n                    onHover={setEditHover}\n                  />\n                  <textarea\n                    {...regEdit(\"comment\")}\n                    rows={3}\n                    className=\"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#c47a5a]/20 focus:border-[#c47a5a] resize-none text-sm\"\n                  />\n                  {editErrors.comment && (\n                    <p className=\"text-red-500 text-xs\">{editErrors.comment.message}</p>\n                  )}\n                  <div className=\"flex gap-2\">\n                    <button\n                      type=\"submit\"\n                      disabled={submittingReview}\n                      className=\"flex items-center gap-1.5 px-4 py-2 bg-[#c47a5a] text-white rounded-lg text-sm font-medium hover:bg-[#b56a4a] disabled:opacity-50\"\n                    >\n                      {submittingReview ? \"Saving...\" : \"Save Changes\"}\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setEditingReview(false)}\n                      className=\"px-4 py-2 rounded-lg border border-gray-200 text-sm text-gray-600 hover:bg-gray-50\"\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </form>\n              ) : (\n                <>\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <div>\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <span className=\"inline-flex items-center gap-1 text-xs font-semibold text-[#c47a5a]\">\n                          <FiCheckCircle size={12} /> Your Review\n                        </span>\n                        <div className=\"flex\">\n                          {[1,2,3,4,5].map((s) => (\n                            <FiStar key={s} size={13} className={s <= myReview.rating ? \"fill-yellow-400 text-yellow-400\" : \"text-gray-300\"} />\n                          ))}\n                        </div>\n                        <span className=\"text-xs text-gray-400\">\n                          {new Date(myReview.createdAt).toLocaleDateString()}\n                        </span>\n                      </div>\n                      {myReview.comment && (\n                        <p className=\"text-sm text-gray-700\">{myReview.comment}</p>\n                      )}\n                    </div>\n                    <div className=\"flex items-center gap-1.5 shrink-0\">\n                      <button\n                        onClick={startEditReview}\n                        className=\"inline-flex items-center gap-1 rounded-lg px-2.5 py-1.5 text-xs font-medium text-gray-600 hover:bg-white border border-gray-200 transition-colors\"\n                      >\n                        <FiEdit2 size={11} /> Edit\n                      </button>\n                      <button\n                        onClick={handleDeleteReview}\n                        disabled={deletingReview}\n                        className=\"inline-flex items-center gap-1 rounded-lg px-2.5 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 border border-red-200 transition-colors disabled:opacity-50\"\n                      >\n                        <FiTrash2 size={11} /> {deletingReview ? \"...\" : \"Delete\"}\n                      </button>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          )}\n\n          {/* Reviews List Header */}\n          {reviewPagination.total > 0 && (\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-sm font-semibold text-gray-700\">\n                All Reviews\n                <span className=\"ml-1.5 text-gray-400 font-normal\">({reviewPagination.total})</span>\n              </h3>\n              <div className=\"relative\">\n                <select\n                  value={sortBy}\n                  onChange={(e) => setSortBy(e.target.value as SortOption)}\n                  className=\"appearance-none pl-3 pr-8 py-1.5 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#c47a5a]/20 text-gray-600 bg-white cursor-pointer\"\n                >\n                  <option value=\"newest\">Newest First</option>\n                  <option value=\"highest\">Highest Rated</option>\n                  <option value=\"lowest\">Lowest Rated</option>\n                </select>\n                <FiChevronDown className=\"absolute right-2 top-1/2 -translate-y-1/2 h-3 w-3 text-gray-400 pointer-events-none\" />\n              </div>\n            </div>\n          )}\n\n          {/* Reviews List */}\n          {reviewsLoading ? (\n            <div className=\"space-y-4\">\n              {[1, 2, 3].map((i) => (\n                <div key={i} className=\"animate-pulse flex gap-3\">\n                  <div className=\"w-10 h-10 bg-gray-200 rounded-full shrink-0\" />\n                  <div className=\"flex-1 space-y-2\">\n                    <div className=\"h-3 bg-gray-200 rounded w-1/4\" />\n                    <div className=\"h-3 bg-gray-200 rounded w-1/2\" />\n                    <div className=\"h-3 bg-gray-200 rounded w-3/4\" />\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : sortedReviews.length === 0 ? (\n            <div className=\"py-10 text-center\">\n              <FiStar className=\"mx-auto mb-2 h-10 w-10 text-gray-300\" />\n              <p className=\"text-gray-400 text-sm\">No reviews yet.</p>\n              {user && canReview && !myReview && (\n                <p className=\"text-xs text-gray-400 mt-1\">Be the first to share your experience!</p>\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-1 divide-y divide-gray-100\">\n              {sortedReviews\n                .filter((r) => r._id !== myReview?._id) // avoid duplicate if myReview is in list\n                .map((review) => {\n                  const reviewUser = typeof review.user === \"object\" ? review.user : null;\n                  return (\n                    <div key={review._id} className=\"flex gap-3 py-4 first:pt-0\">\n                      <div className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center shrink-0 overflow-hidden\">\n                        {reviewUser?.avatar ? (\n                          <Image\n                            src={getImageUrl(reviewUser.avatar)}\n                            alt=\"\"\n                            width={40}\n                            height={40}\n                            className=\"w-full h-full rounded-full object-cover\"\n                            unoptimized\n                          />\n                        ) : (\n                          <FiUser size={16} className=\"text-gray-400\" />\n                        )}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2 flex-wrap mb-1\">\n                          <span className=\"text-sm font-semibold text-gray-800\">\n                            {reviewUser?.name || \"User\"}\n                          </span>\n                          <div className=\"flex items-center gap-0.5\">\n                            {[1, 2, 3, 4, 5].map((s) => (\n                              <FiStar\n                                key={s}\n                                size={12}\n                                className={s <= review.rating ? \"fill-yellow-400 text-yellow-400\" : \"text-gray-300\"}\n                              />\n                            ))}\n                          </div>\n                          <span className=\"text-xs text-gray-400\">\n                            {new Date(review.createdAt).toLocaleDateString(\"en-US\", {\n                              year: \"numeric\",\n                              month: \"short\",\n                              day: \"numeric\",\n                            })}\n                          </span>\n                        </div>\n                        {review.comment && (\n                          <p className=\"text-sm text-gray-600 leading-relaxed\">{review.comment}</p>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n            </div>\n          )}\n\n          {/* Pagination */}\n          {reviewPagination.pages > 1 && (\n            <div className=\"flex items-center justify-center gap-2 pt-2 border-t border-gray-100\">\n              <button\n                onClick={() => setReviewPage((p) => Math.max(1, p - 1))}\n                disabled={reviewPage <= 1}\n                className=\"px-3 py-1.5 rounded-lg border border-gray-200 text-xs text-gray-600 hover:bg-gray-50 disabled:opacity-40\"\n              >\n                Previous\n              </button>\n              <span className=\"text-xs text-gray-500\">\n                Page {reviewPage} of {reviewPagination.pages}\n              </span>\n              <button\n                onClick={() => setReviewPage((p) => Math.min(reviewPagination.pages, p + 1))}\n                disabled={reviewPage >= reviewPagination.pages}\n                className=\"px-3 py-1.5 rounded-lg border border-gray-200 text-xs text-gray-600 hover:bg-gray-50 disabled:opacity-40\"\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}