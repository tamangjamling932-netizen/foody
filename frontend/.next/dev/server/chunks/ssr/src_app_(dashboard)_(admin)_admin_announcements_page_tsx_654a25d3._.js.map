{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/trish/Documents/joseph/foody/frontend/src/app/%28dashboard%29/%28admin%29/admin/announcements/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport API from \"@/lib/api\";\nimport { Announcement } from \"@/types\";\nimport toast from \"react-hot-toast\";\nimport {\n  FiBell,\n  FiPlus,\n  FiEdit2,\n  FiTrash2,\n  FiBookmark,\n  FiEye,\n  FiEyeOff,\n  FiX,\n  FiChevronLeft,\n  FiChevronRight,\n  FiAlertCircle,\n  FiCalendar,\n  FiTag,\n  FiCheckCircle,\n} from \"react-icons/fi\";\n\ntype AnnouncementType = Announcement[\"type\"];\n\nconst TYPE_CONFIG: Record<\n  AnnouncementType,\n  { label: string; color: string; bg: string; border: string }\n> = {\n  offer:   { label: \"Offer\",   color: \"text-green-700\",  bg: \"bg-green-100\",  border: \"border-green-200\" },\n  event:   { label: \"Event\",   color: \"text-blue-700\",   bg: \"bg-blue-100\",   border: \"border-blue-200\" },\n  notice:  { label: \"Notice\",  color: \"text-gray-700\",   bg: \"bg-gray-100\",   border: \"border-gray-200\" },\n  closure: { label: \"Closure\", color: \"text-red-700\",    bg: \"bg-red-100\",    border: \"border-red-200\" },\n  update:  { label: \"Update\",  color: \"text-purple-700\", bg: \"bg-purple-100\", border: \"border-purple-200\" },\n};\n\nconst EMPTY_FORM = {\n  title: \"\",\n  body: \"\",\n  type: \"notice\" as AnnouncementType,\n  isPinned: false,\n  isActive: true,\n  expiresAt: \"\",\n};\n\nexport default function AdminAnnouncementsPage() {\n  const [announcements, setAnnouncements] = useState<Announcement[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [pagination, setPagination] = useState({ page: 1, pages: 1, total: 0 });\n\n  // Modal state\n  const [showForm, setShowForm] = useState(false);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [form, setForm] = useState(EMPTY_FORM);\n  const [submitting, setSubmitting] = useState(false);\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n\n  const fetchAnnouncements = useCallback(async (page = 1) => {\n    setLoading(true);\n    try {\n      const res = await API.get(\"/announcements/all\", { params: { page, limit: 10 } });\n      setAnnouncements(res.data.announcements || []);\n      if (res.data.pagination) {\n        setPagination({\n          page: res.data.pagination.page,\n          pages: res.data.pagination.pages,\n          total: res.data.pagination.total,\n        });\n      }\n    } catch {\n      toast.error(\"Failed to load announcements\");\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchAnnouncements(pagination.page);\n  }, [pagination.page]);\n\n  const openCreate = () => {\n    setEditingId(null);\n    setForm(EMPTY_FORM);\n    setShowForm(true);\n  };\n\n  const openEdit = (ann: Announcement) => {\n    setEditingId(ann._id);\n    setForm({\n      title: ann.title,\n      body: ann.body,\n      type: ann.type,\n      isPinned: ann.isPinned,\n      isActive: ann.isActive,\n      expiresAt: ann.expiresAt\n        ? new Date(ann.expiresAt).toISOString().slice(0, 16)\n        : \"\",\n    });\n    setShowForm(true);\n  };\n\n  const closeForm = () => {\n    setShowForm(false);\n    setEditingId(null);\n    setForm(EMPTY_FORM);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!form.title.trim()) { toast.error(\"Title is required\"); return; }\n    if (!form.body.trim()) { toast.error(\"Body is required\"); return; }\n\n    setSubmitting(true);\n    try {\n      const payload = {\n        ...form,\n        expiresAt: form.expiresAt ? new Date(form.expiresAt).toISOString() : null,\n      };\n\n      if (editingId) {\n        const res = await API.put(`/announcements/${editingId}`, payload);\n        const updated = res.data.announcement;\n        setAnnouncements((prev) =>\n          prev.map((a) => (a._id === editingId ? updated : a))\n        );\n        toast.success(\"Announcement updated!\");\n      } else {\n        const res = await API.post(\"/announcements\", payload);\n        setAnnouncements((prev) => [res.data.announcement, ...prev]);\n        setPagination((p) => ({ ...p, total: p.total + 1 }));\n        toast.success(\"Announcement created!\");\n      }\n      closeForm();\n    } catch (err: any) {\n      toast.error(err.response?.data?.message || \"Failed to save announcement\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleDelete = async (id: string) => {\n    if (!confirm(\"Delete this announcement?\")) return;\n    setDeletingId(id);\n    try {\n      await API.delete(`/announcements/${id}`);\n      setAnnouncements((prev) => prev.filter((a) => a._id !== id));\n      setPagination((p) => ({ ...p, total: Math.max(0, p.total - 1) }));\n      toast.success(\"Announcement deleted\");\n    } catch (err: any) {\n      toast.error(err.response?.data?.message || \"Failed to delete\");\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  const handleToggleActive = async (ann: Announcement) => {\n    try {\n      const res = await API.put(`/announcements/${ann._id}`, { isActive: !ann.isActive });\n      setAnnouncements((prev) =>\n        prev.map((a) => (a._id === ann._id ? res.data.announcement : a))\n      );\n      toast.success(ann.isActive ? \"Announcement hidden\" : \"Announcement activated\");\n    } catch {\n      toast.error(\"Failed to update\");\n    }\n  };\n\n  const handleTogglePin = async (ann: Announcement) => {\n    try {\n      const res = await API.put(`/announcements/${ann._id}`, { isPinned: !ann.isPinned });\n      setAnnouncements((prev) =>\n        prev.map((a) => (a._id === ann._id ? res.data.announcement : a))\n      );\n    } catch {\n      toast.error(\"Failed to update\");\n    }\n  };\n\n  const activeCount = announcements.filter((a) => a.isActive).length;\n  const pinnedCount = announcements.filter((a) => a.isPinned).length;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-start justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-800\">Announcements</h1>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Post notices, offers, and updates for your customers\n          </p>\n        </div>\n        <button\n          onClick={openCreate}\n          className=\"inline-flex items-center gap-2 rounded-xl bg-[#c47a5a] px-4 py-2.5 text-sm font-semibold text-white hover:bg-[#b56a4a] transition-colors\"\n        >\n          <FiPlus size={16} />\n          New Announcement\n        </button>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-4\">\n        <div className=\"rounded-xl bg-white p-4 shadow-sm\">\n          <p className=\"text-xs text-gray-500\">Total</p>\n          <p className=\"mt-1 text-2xl font-bold text-gray-800\">{pagination.total}</p>\n        </div>\n        <div className=\"rounded-xl bg-white p-4 shadow-sm\">\n          <p className=\"text-xs text-gray-500\">Active (this page)</p>\n          <p className=\"mt-1 text-2xl font-bold text-green-600\">{activeCount}</p>\n        </div>\n        <div className=\"rounded-xl bg-white p-4 shadow-sm\">\n          <p className=\"text-xs text-gray-500\">Pinned (this page)</p>\n          <p className=\"mt-1 text-2xl font-bold text-[#c47a5a]\">{pinnedCount}</p>\n        </div>\n        <div className=\"rounded-xl bg-white p-4 shadow-sm\">\n          <p className=\"text-xs text-gray-500\">Hidden (this page)</p>\n          <p className=\"mt-1 text-2xl font-bold text-gray-400\">\n            {announcements.length - activeCount}\n          </p>\n        </div>\n      </div>\n\n      {/* Announcements List */}\n      {loading ? (\n        <div className=\"space-y-3\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"rounded-xl bg-white p-5 shadow-sm animate-pulse\">\n              <div className=\"flex gap-4\">\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"h-4 bg-gray-200 rounded w-1/3\" />\n                  <div className=\"h-3 bg-gray-200 rounded w-2/3\" />\n                  <div className=\"h-3 bg-gray-200 rounded w-full\" />\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : announcements.length === 0 ? (\n        <div className=\"rounded-xl bg-white p-14 shadow-sm text-center\">\n          <FiBell className=\"mx-auto mb-3 h-12 w-12 text-gray-300\" />\n          <h3 className=\"text-base font-semibold text-gray-700\">No Announcements Yet</h3>\n          <p className=\"mt-1 text-sm text-gray-400\">\n            Create your first announcement to inform customers.\n          </p>\n          <button\n            onClick={openCreate}\n            className=\"mt-4 inline-flex items-center gap-2 rounded-xl bg-[#c47a5a] px-5 py-2.5 text-sm font-medium text-white hover:bg-[#b56a4a] transition-colors\"\n          >\n            <FiPlus size={14} />\n            Create Announcement\n          </button>\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {announcements.map((ann) => {\n            const cfg = TYPE_CONFIG[ann.type];\n            const isExpired = ann.expiresAt && new Date(ann.expiresAt) < new Date();\n            return (\n              <div\n                key={ann._id}\n                className={`rounded-xl bg-white shadow-sm overflow-hidden border-l-4 transition-opacity ${\n                  !ann.isActive ? \"opacity-60\" : \"\"\n                } ${ann.isPinned ? \"border-[#c47a5a]\" : \"border-transparent\"}`}\n              >\n                <div className=\"p-5\">\n                  <div className=\"flex items-start gap-4\">\n                    <div className=\"flex-1 min-w-0\">\n                      {/* Title row */}\n                      <div className=\"flex items-center gap-2 flex-wrap mb-1\">\n                        {ann.isPinned && (\n                          <FiBookmark size={13} className=\"text-[#c47a5a] shrink-0\" />\n                        )}\n                        <h3 className=\"text-base font-semibold text-gray-800 truncate\">\n                          {ann.title}\n                        </h3>\n                        <span className={`inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-semibold border ${cfg.bg} ${cfg.color} ${cfg.border}`}>\n                          <FiTag size={9} />\n                          {cfg.label}\n                        </span>\n                        {!ann.isActive && (\n                          <span className=\"rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-500\">\n                            Hidden\n                          </span>\n                        )}\n                        {isExpired && (\n                          <span className=\"rounded-full bg-red-100 px-2 py-0.5 text-xs text-red-600\">\n                            Expired\n                          </span>\n                        )}\n                      </div>\n\n                      {/* Body */}\n                      <p className=\"text-sm text-gray-600 leading-relaxed line-clamp-2 mb-2\">\n                        {ann.body}\n                      </p>\n\n                      {/* Meta */}\n                      <div className=\"flex items-center gap-3 text-xs text-gray-400 flex-wrap\">\n                        <span className=\"flex items-center gap-1\">\n                          <FiCalendar size={10} />\n                          {new Date(ann.createdAt).toLocaleDateString(\"en-US\", {\n                            month: \"short\",\n                            day: \"numeric\",\n                            year: \"numeric\",\n                          })}\n                        </span>\n                        {ann.expiresAt && (\n                          <span className={`flex items-center gap-1 ${isExpired ? \"text-red-400\" : \"\"}`}>\n                            <FiAlertCircle size={10} />\n                            Expires {new Date(ann.expiresAt).toLocaleDateString(\"en-US\", {\n                              month: \"short\",\n                              day: \"numeric\",\n                              year: \"numeric\",\n                            })}\n                          </span>\n                        )}\n                        {typeof ann.createdBy === \"object\" && ann.createdBy !== null && (\n                          <span>by {ann.createdBy.name}</span>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Actions */}\n                    <div className=\"flex items-center gap-1.5 shrink-0\">\n                      <button\n                        onClick={() => handleTogglePin(ann)}\n                        title={ann.isPinned ? \"Unpin\" : \"Pin to top\"}\n                        className={`p-2 rounded-lg border transition-colors text-sm ${\n                          ann.isPinned\n                            ? \"bg-[#c47a5a]/10 border-[#c47a5a]/20 text-[#c47a5a]\"\n                            : \"border-gray-200 text-gray-400 hover:bg-gray-50\"\n                        }`}\n                      >\n                        <FiBookmark size={14} />\n                      </button>\n                      <button\n                        onClick={() => handleToggleActive(ann)}\n                        title={ann.isActive ? \"Hide\" : \"Show\"}\n                        className=\"p-2 rounded-lg border border-gray-200 text-gray-400 hover:bg-gray-50 transition-colors\"\n                      >\n                        {ann.isActive ? <FiEye size={14} /> : <FiEyeOff size={14} />}\n                      </button>\n                      <button\n                        onClick={() => openEdit(ann)}\n                        className=\"p-2 rounded-lg border border-gray-200 text-gray-500 hover:bg-gray-50 transition-colors\"\n                      >\n                        <FiEdit2 size={14} />\n                      </button>\n                      <button\n                        onClick={() => handleDelete(ann._id)}\n                        disabled={deletingId === ann._id}\n                        className=\"p-2 rounded-lg border border-red-200 text-red-500 hover:bg-red-50 transition-colors disabled:opacity-50\"\n                      >\n                        <FiTrash2 size={14} />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Pagination */}\n      {pagination.pages > 1 && (\n        <div className=\"flex items-center justify-between\">\n          <p className=\"text-sm text-gray-500\">\n            Page {pagination.page} of {pagination.pages} &bull; {pagination.total} announcements\n          </p>\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={() => setPagination((p) => ({ ...p, page: p.page - 1 }))}\n              disabled={pagination.page <= 1}\n              className=\"rounded-lg border border-gray-200 p-2 text-gray-600 hover:bg-gray-50 disabled:opacity-40\"\n            >\n              <FiChevronLeft className=\"h-4 w-4\" />\n            </button>\n            <button\n              onClick={() => setPagination((p) => ({ ...p, page: p.page + 1 }))}\n              disabled={pagination.page >= pagination.pages}\n              className=\"rounded-lg border border-gray-200 p-2 text-gray-600 hover:bg-gray-50 disabled:opacity-40\"\n            >\n              <FiChevronRight className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Create / Edit Modal */}\n      {showForm && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50\">\n          <div className=\"w-full max-w-lg rounded-2xl bg-white shadow-xl\">\n            {/* Modal Header */}\n            <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100\">\n              <h2 className=\"text-lg font-bold text-gray-800\">\n                {editingId ? \"Edit Announcement\" : \"New Announcement\"}\n              </h2>\n              <button\n                onClick={closeForm}\n                className=\"rounded-lg p-1.5 text-gray-400 hover:bg-gray-100 transition-colors\"\n              >\n                <FiX size={18} />\n              </button>\n            </div>\n\n            {/* Form */}\n            <form onSubmit={handleSubmit} className=\"px-6 py-5 space-y-4\">\n              {/* Title */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Title <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  value={form.title}\n                  onChange={(e) => setForm((f) => ({ ...f, title: e.target.value }))}\n                  placeholder=\"e.g. Happy Hour Today! 50% Off All Drinks\"\n                  maxLength={100}\n                  className=\"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#c47a5a]/20 focus:border-[#c47a5a] text-sm\"\n                />\n                <p className=\"mt-1 text-xs text-gray-400 text-right\">{form.title.length}/100</p>\n              </div>\n\n              {/* Body */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Message <span className=\"text-red-500\">*</span>\n                </label>\n                <textarea\n                  value={form.body}\n                  onChange={(e) => setForm((f) => ({ ...f, body: e.target.value }))}\n                  placeholder=\"Describe the announcement in detail...\"\n                  rows={4}\n                  maxLength={1000}\n                  className=\"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#c47a5a]/20 focus:border-[#c47a5a] resize-none text-sm\"\n                />\n                <p className=\"mt-1 text-xs text-gray-400 text-right\">{form.body.length}/1000</p>\n              </div>\n\n              {/* Type + Expires Row */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Type</label>\n                  <select\n                    value={form.type}\n                    onChange={(e) => setForm((f) => ({ ...f, type: e.target.value as AnnouncementType }))}\n                    className=\"w-full px-3 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#c47a5a]/20 focus:border-[#c47a5a] text-sm bg-white\"\n                  >\n                    <option value=\"notice\">Notice</option>\n                    <option value=\"offer\">Offer</option>\n                    <option value=\"event\">Event</option>\n                    <option value=\"closure\">Closure</option>\n                    <option value=\"update\">Update</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Expires At\n                  </label>\n                  <input\n                    type=\"datetime-local\"\n                    value={form.expiresAt}\n                    onChange={(e) => setForm((f) => ({ ...f, expiresAt: e.target.value }))}\n                    className=\"w-full px-3 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#c47a5a]/20 focus:border-[#c47a5a] text-sm\"\n                  />\n                </div>\n              </div>\n\n              {/* Toggles */}\n              <div className=\"flex items-center gap-6\">\n                <label className=\"flex items-center gap-2 cursor-pointer select-none\">\n                  <div\n                    onClick={() => setForm((f) => ({ ...f, isActive: !f.isActive }))}\n                    className={`relative w-10 h-6 rounded-full transition-colors ${\n                      form.isActive ? \"bg-green-500\" : \"bg-gray-300\"\n                    }`}\n                  >\n                    <span\n                      className={`absolute top-1 w-4 h-4 rounded-full bg-white shadow transition-transform ${\n                        form.isActive ? \"translate-x-5\" : \"translate-x-1\"\n                      }`}\n                    />\n                  </div>\n                  <span className=\"text-sm text-gray-700 flex items-center gap-1\">\n                    <FiCheckCircle size={13} className={form.isActive ? \"text-green-500\" : \"text-gray-400\"} />\n                    Active\n                  </span>\n                </label>\n\n                <label className=\"flex items-center gap-2 cursor-pointer select-none\">\n                  <div\n                    onClick={() => setForm((f) => ({ ...f, isPinned: !f.isPinned }))}\n                    className={`relative w-10 h-6 rounded-full transition-colors ${\n                      form.isPinned ? \"bg-[#c47a5a]\" : \"bg-gray-300\"\n                    }`}\n                  >\n                    <span\n                      className={`absolute top-1 w-4 h-4 rounded-full bg-white shadow transition-transform ${\n                        form.isPinned ? \"translate-x-5\" : \"translate-x-1\"\n                      }`}\n                    />\n                  </div>\n                  <span className=\"text-sm text-gray-700 flex items-center gap-1\">\n                    <FiBookmark size={13} className={form.isPinned ? \"text-[#c47a5a]\" : \"text-gray-400\"} />\n                    Pinned\n                  </span>\n                </label>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex items-center gap-3 pt-2 border-t border-gray-100\">\n                <button\n                  type=\"submit\"\n                  disabled={submitting}\n                  className=\"flex items-center gap-2 px-5 py-2.5 bg-[#c47a5a] text-white rounded-xl text-sm font-semibold hover:bg-[#b56a4a] disabled:opacity-50 transition-colors\"\n                >\n                  {submitting ? \"Saving...\" : editingId ? \"Save Changes\" : \"Create Announcement\"}\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={closeForm}\n                  className=\"px-5 py-2.5 rounded-xl border border-gray-200 text-sm text-gray-600 hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}