{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/trish/Documents/joseph/foody/frontend/src/app/%28dashboard%29/%28customer%29/announcements/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport API from \"@/lib/api\";\nimport { Announcement } from \"@/types\";\nimport {\n  FiBell,\n  FiTag,\n  FiAlertCircle,\n  FiCalendar,\n  FiBookmark,\n  FiInbox,\n} from \"react-icons/fi\";\n\nconst TYPE_CONFIG: Record<\n  Announcement[\"type\"],\n  { label: string; textColor: string; bgColor: string; borderColor: string; barColor: string }\n> = {\n  offer:   { label: \"Offer\",   textColor: \"text-green-700\",  bgColor: \"bg-green-50\",  borderColor: \"border-green-200\", barColor: \"bg-green-500\"  },\n  event:   { label: \"Event\",   textColor: \"text-blue-700\",   bgColor: \"bg-blue-50\",   borderColor: \"border-blue-200\",  barColor: \"bg-blue-500\"   },\n  notice:  { label: \"Notice\",  textColor: \"text-amber-700\",  bgColor: \"bg-amber-50\",  borderColor: \"border-amber-200\", barColor: \"bg-amber-500\"  },\n  closure: { label: \"Closure\", textColor: \"text-red-700\",    bgColor: \"bg-red-50\",    borderColor: \"border-red-200\",   barColor: \"bg-red-500\"    },\n  update:  { label: \"Update\",  textColor: \"text-purple-700\", bgColor: \"bg-purple-50\", borderColor: \"border-purple-200\",barColor: \"bg-purple-500\" },\n};\n\nexport default function CustomerAnnouncementsPage() {\n  const [announcements, setAnnouncements] = useState<Announcement[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeFilter, setActiveFilter] = useState<\"all\" | Announcement[\"type\"]>(\"all\");\n\n  useEffect(() => {\n    const fetch = async () => {\n      try {\n        const res = await API.get(\"/announcements\");\n        setAnnouncements(res.data.announcements || []);\n      } catch {}\n      setLoading(false);\n    };\n    fetch();\n  }, []);\n\n  const filtered =\n    activeFilter === \"all\"\n      ? announcements\n      : announcements.filter((a) => a.type === activeFilter);\n\n  const typeCounts = announcements.reduce<Record<string, number>>((acc, a) => {\n    acc[a.type] = (acc[a.type] || 0) + 1;\n    return acc;\n  }, {});\n\n  const filters: { key: \"all\" | Announcement[\"type\"]; label: string }[] = [\n    { key: \"all\", label: \"All\" },\n    { key: \"offer\", label: \"Offers\" },\n    { key: \"event\", label: \"Events\" },\n    { key: \"notice\", label: \"Notices\" },\n    { key: \"closure\", label: \"Closures\" },\n    { key: \"update\", label: \"Updates\" },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-800\">Announcements</h1>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Stay up to date with the latest news and offers from us\n        </p>\n      </div>\n\n      {/* Filter Tabs */}\n      <div className=\"flex items-center gap-2 overflow-x-auto pb-1\">\n        {filters.map((f) => {\n          const count = f.key === \"all\" ? announcements.length : (typeCounts[f.key] || 0);\n          if (f.key !== \"all\" && count === 0) return null;\n          return (\n            <button\n              key={f.key}\n              onClick={() => setActiveFilter(f.key)}\n              className={`shrink-0 rounded-full px-4 py-1.5 text-sm font-medium transition-colors ${\n                activeFilter === f.key\n                  ? \"bg-[#c47a5a] text-white\"\n                  : \"bg-white text-gray-600 border border-gray-200 hover:border-[#c47a5a] hover:text-[#c47a5a]\"\n              }`}\n            >\n              {f.label}\n              {count > 0 && (\n                <span className={`ml-1.5 text-xs ${activeFilter === f.key ? \"opacity-80\" : \"text-gray-400\"}`}>\n                  ({count})\n                </span>\n              )}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Content */}\n      {loading ? (\n        <div className=\"space-y-4\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"rounded-xl bg-white p-6 shadow-sm animate-pulse\">\n              <div className=\"space-y-2\">\n                <div className=\"h-4 bg-gray-200 rounded w-1/4\" />\n                <div className=\"h-5 bg-gray-200 rounded w-1/2\" />\n                <div className=\"h-3 bg-gray-200 rounded w-full\" />\n                <div className=\"h-3 bg-gray-200 rounded w-3/4\" />\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : filtered.length === 0 ? (\n        <div className=\"rounded-xl bg-white p-16 shadow-sm text-center\">\n          <FiInbox className=\"mx-auto mb-3 h-12 w-12 text-gray-300\" />\n          <h3 className=\"text-base font-semibold text-gray-700\">No Announcements</h3>\n          <p className=\"mt-1 text-sm text-gray-400\">\n            {activeFilter === \"all\"\n              ? \"There are no announcements at the moment. Check back later!\"\n              : `No ${activeFilter} announcements right now.`}\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {filtered.map((ann) => {\n            const cfg = TYPE_CONFIG[ann.type];\n            const isExpiringSoon =\n              ann.expiresAt &&\n              new Date(ann.expiresAt).getTime() - Date.now() < 24 * 60 * 60 * 1000;\n            return (\n              <div\n                key={ann._id}\n                className={`rounded-xl bg-white shadow-sm overflow-hidden border border-gray-100 ${\n                  ann.isPinned ? \"ring-1 ring-[#c47a5a]/30\" : \"\"\n                }`}\n              >\n                {/* Colored top bar */}\n                <div className={`h-1 w-full ${cfg.barColor}`} />\n\n                <div className=\"p-5\">\n                  {/* Badges row */}\n                  <div className=\"flex items-center gap-2 flex-wrap mb-2\">\n                    {ann.isPinned && (\n                      <span className=\"inline-flex items-center gap-1 rounded-full bg-[#c47a5a]/10 px-2.5 py-0.5 text-xs font-semibold text-[#c47a5a]\">\n                        <FiBookmark size={10} />\n                        Pinned\n                      </span>\n                    )}\n                    <span\n                      className={`inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-semibold border ${cfg.bgColor} ${cfg.textColor} ${cfg.borderColor}`}\n                    >\n                      <FiTag size={9} />\n                      {cfg.label}\n                    </span>\n                    {isExpiringSoon && (\n                      <span className=\"inline-flex items-center gap-1 rounded-full bg-orange-100 px-2.5 py-0.5 text-xs font-semibold text-orange-700\">\n                        <FiAlertCircle size={9} />\n                        Ending Soon\n                      </span>\n                    )}\n                  </div>\n\n                  {/* Title */}\n                  <h2 className=\"text-base font-bold text-gray-800 mb-1\">{ann.title}</h2>\n\n                  {/* Body */}\n                  <p className=\"text-sm text-gray-600 leading-relaxed\">{ann.body}</p>\n\n                  {/* Footer meta */}\n                  <div className=\"flex items-center gap-4 mt-3 pt-3 border-t border-gray-100 text-xs text-gray-400\">\n                    <span className=\"flex items-center gap-1\">\n                      <FiBell size={10} />\n                      {new Date(ann.createdAt).toLocaleDateString(\"en-US\", {\n                        month: \"long\",\n                        day: \"numeric\",\n                        year: \"numeric\",\n                      })}\n                    </span>\n                    {ann.expiresAt && (\n                      <span className={`flex items-center gap-1 ${isExpiringSoon ? \"text-orange-500 font-medium\" : \"\"}`}>\n                        <FiCalendar size={10} />\n                        Valid until{\" \"}\n                        {new Date(ann.expiresAt).toLocaleDateString(\"en-US\", {\n                          month: \"short\",\n                          day: \"numeric\",\n                          year: \"numeric\",\n                        })}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}