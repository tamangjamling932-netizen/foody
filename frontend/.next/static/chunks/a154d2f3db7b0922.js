(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,29710,e=>{"use strict";function s(e){return`â‚¨ ${e.toFixed(2)}`}e.s(["formatCurrency",()=>s])},54384,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(54338),l=e.i(9165),c=e.i(5766),i=e.i(92199),n=e.i(29710);function d(){let{user:e}=(0,r.useAuth)(),d=(0,a.useRouter)(),[o,x]=(0,t.useState)([]),[m,h]=(0,t.useState)(!0);(0,t.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await l.default.get("/orders/my-orders");x(e.data.orders||e.data)}catch(e){c.default.error(e.response?.data?.message||"Failed to load orders")}finally{h(!1)}},g=o.length,p=o.filter(e=>"pending"===e.status||"confirmed"===e.status||"preparing"===e.status).length,j=o.filter(e=>"cancelled"!==e.status).reduce((e,s)=>e+s.total,0),f={};o.forEach(e=>{e.items.forEach(e=>{f[e.product]?f[e.product].count+=e.quantity:f[e.product]={name:e.name,count:e.quantity,image:e.image}})});let b=Object.values(f).sort((e,s)=>s.count-e.count).slice(0,3),y=o.slice(0,5);return m?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[#c47a5a] border-t-transparent"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-800",children:["Welcome back, ",e?.name?.split(" ")[0]||"Guest","!"]}),(0,s.jsx)("p",{className:"mt-1 text-gray-500",children:"Here's a summary of your orders and activity."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 rounded-xl bg-white p-5 shadow-sm",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-[#c47a5a]/10",children:(0,s.jsx)(i.FiShoppingBag,{className:"h-6 w-6 text-[#c47a5a]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Orders"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:g})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 rounded-xl bg-white p-5 shadow-sm",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-yellow-100",children:(0,s.jsx)(i.FiClock,{className:"h-6 w-6 text-yellow-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Pending Orders"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:p})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 rounded-xl bg-white p-5 shadow-sm",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-green-100",children:(0,s.jsx)(i.FiDollarSign,{className:"h-6 w-6 text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Spent"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:(0,n.formatCurrency)(j)})]})]})]}),b.length>0&&(0,s.jsxs)("div",{className:"rounded-xl bg-white p-5 shadow-sm",children:[(0,s.jsxs)("h2",{className:"mb-4 flex items-center gap-2 text-lg font-semibold text-gray-800",children:[(0,s.jsx)(i.FiTrendingUp,{className:"h-5 w-5 text-[#c47a5a]"}),"Your Favorite Items"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-3",children:b.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3 rounded-lg bg-gradient-to-r from-[#c47a5a]/5 to-transparent p-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsxs)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-[#c47a5a]/10 text-sm font-bold text-[#c47a5a]",children:["#",t+1]})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-800 truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Ordered ",e.count,"x"]})]})]},t))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-3",children:[(0,s.jsxs)("button",{onClick:()=>d.push("/menu"),className:"flex items-center justify-center gap-2 rounded-xl bg-[#c47a5a] px-5 py-3 font-medium text-white transition-colors hover:bg-[#b56a4a]",children:[(0,s.jsx)(i.FiPackage,{className:"h-5 w-5"}),"Browse Menu"]}),(0,s.jsxs)("button",{onClick:()=>d.push("/cart"),className:"flex items-center justify-center gap-2 rounded-xl border-2 border-[#c47a5a] px-5 py-3 font-medium text-[#c47a5a] transition-colors hover:bg-[#c47a5a]/5",children:[(0,s.jsx)(i.FiShoppingCart,{className:"h-5 w-5"}),"View Cart"]}),(0,s.jsxs)("button",{onClick:()=>d.push("/orders"),className:"flex items-center justify-center gap-2 rounded-xl border-2 border-[#c47a5a] px-5 py-3 font-medium text-[#c47a5a] transition-colors hover:bg-[#c47a5a]/5",children:[(0,s.jsx)(i.FiList,{className:"h-5 w-5"}),"View Orders"]})]}),(0,s.jsxs)("div",{className:"rounded-xl bg-white p-5 shadow-sm",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Recent Orders"}),o.length>5&&(0,s.jsxs)("button",{onClick:()=>d.push("/orders"),className:"flex items-center gap-1 text-sm font-medium text-[#c47a5a] hover:underline",children:["View All ",(0,s.jsx)(i.FiArrowRight,{className:"h-4 w-4"})]})]}),0===y.length?(0,s.jsxs)("div",{className:"py-10 text-center text-gray-400",children:[(0,s.jsx)(i.FiShoppingBag,{className:"mx-auto mb-2 h-10 w-10"}),(0,s.jsx)("p",{children:"No orders yet. Start by browsing the menu!"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b text-gray-500",children:[(0,s.jsx)("th",{className:"pb-3 font-medium",children:"Order ID"}),(0,s.jsx)("th",{className:"pb-3 font-medium",children:"Items"}),(0,s.jsx)("th",{className:"pb-3 font-medium",children:"Total"}),(0,s.jsx)("th",{className:"pb-3 font-medium",children:"Status"}),(0,s.jsx)("th",{className:"pb-3 font-medium",children:"Date"})]})}),(0,s.jsx)("tbody",{children:y.map(e=>(0,s.jsxs)("tr",{className:"border-b last:border-0 hover:bg-gray-50 cursor-pointer",onClick:()=>d.push(`/orders/${e._id}`),children:[(0,s.jsxs)("td",{className:"py-3 font-mono text-xs text-gray-600",children:["#",e._id.slice(-6).toUpperCase()]}),(0,s.jsxs)("td",{className:"py-3 text-gray-700",children:[e.items.length," item",1!==e.items.length&&"s"]}),(0,s.jsx)("td",{className:"py-3 font-medium text-gray-800",children:(0,n.formatCurrency)(e.total)}),(0,s.jsx)("td",{className:"py-3",children:(0,s.jsx)("span",{className:`inline-block rounded-full px-2.5 py-0.5 text-xs font-medium capitalize ${(e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"preparing":return"bg-orange-100 text-orange-800";case"served":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:e.status})}),(0,s.jsx)("td",{className:"py-3 text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]},e._id))})]})})]})]})}e.s(["default",()=>d])}]);