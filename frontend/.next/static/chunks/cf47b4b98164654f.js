(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3536,e=>{"use strict";var s=e.i(81307);let a=s.z.object({name:s.z.string().min(2,"Product name is required"),description:s.z.string().optional(),price:s.z.coerce.number().positive("Price must be positive"),category:s.z.string().min(1,"Category is required"),isVeg:s.z.boolean().optional(),isAvailable:s.z.boolean().optional(),isFeatured:s.z.boolean().optional(),isHotDeal:s.z.boolean().optional(),isDailySpecial:s.z.boolean().optional(),isChefSpecial:s.z.boolean().optional(),discountType:s.z.enum(["none","percentage","fixed","bogo","combo"]).default("none").optional(),discountValue:s.z.coerce.number().min(0).optional(),offerLabel:s.z.string().optional(),offerValidUntil:s.z.string().optional(),bogoQuantity:s.z.coerce.number().min(0).optional(),bogoFreeQuantity:s.z.coerce.number().min(0).optional()}),t=s.z.object({tableNumber:s.z.string().optional(),notes:s.z.string().optional()});e.s(["createProductSchema",0,a,"orderCheckoutSchema",0,t])},81293,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(18566),r=e.i(57688),l=e.i(22016),i=e.i(9165),d=e.i(5766),o=e.i(53145),n=e.i(94814),c=e.i(3536),m=e.i(92199);function u(){let e=(0,t.useRouter)(),[u,x]=(0,a.useState)(null),[p,h]=(0,a.useState)(!0),[b,g]=(0,a.useState)(null),[f,y]=(0,a.useState)(null),[j,N]=(0,a.useState)(!1),[v,w]=(0,a.useState)(!1),{register:z,handleSubmit:F,formState:{errors:S}}=(0,o.useForm)({resolver:(0,n.zodResolver)(c.orderCheckoutSchema),defaultValues:{tableNumber:"",notes:""}});(0,a.useEffect)(()=>{C()},[]);let C=async()=>{h(!0);try{let e=await i.default.get("/cart");x(e.data.cart||e.data||null)}catch(e){d.default.error(e.response?.data?.message||"Failed to load cart")}finally{h(!1)}},_=async(e,s)=>{if(!(s<1)){g(e);try{let a=await i.default.put(`/cart/${e}`,{quantity:s});x(a.data.cart||a.data)}catch(e){d.default.error(e.response?.data?.message||"Failed to update quantity")}finally{g(null)}}},k=async e=>{y(e);try{let s=await i.default.delete(`/cart/${e}`);x(s.data.cart||s.data),d.default.success("Item removed from cart")}catch(e){d.default.error(e.response?.data?.message||"Failed to remove item")}finally{y(null)}},q=async()=>{N(!0);try{await i.default.delete("/cart"),x(null),d.default.success("Cart cleared")}catch(e){d.default.error(e.response?.data?.message||"Failed to clear cart")}finally{N(!1)}},T=async s=>{if(!u||0===u.items.length)return void d.default.error("Your cart is empty");w(!0);try{let a=await i.default.post("/orders",{tableNumber:s.tableNumber||void 0,notes:s.notes||void 0}),t=a.data.order||a.data;d.default.success("Order placed successfully!"),x(null),e.push(`/orders/${t._id}`)}catch(e){d.default.error(e.response?.data?.message||"Failed to place order")}finally{w(!1)}},P=u?.items||[],$=P.reduce((e,s)=>e+s.product.price*s.quantity,0),A=.05*$,B=$+A;return p?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"h-8 w-40 rounded bg-gray-200 animate-pulse"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,s.jsx)("div",{className:"space-y-4 lg:col-span-2",children:Array.from({length:3}).map((e,a)=>(0,s.jsxs)("div",{className:"flex gap-4 rounded-xl bg-white p-4 shadow-sm animate-pulse",children:[(0,s.jsx)("div",{className:"h-20 w-20 shrink-0 rounded-lg bg-gray-200"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("div",{className:"h-4 w-3/4 rounded bg-gray-200"}),(0,s.jsx)("div",{className:"h-4 w-1/4 rounded bg-gray-200"}),(0,s.jsx)("div",{className:"h-8 w-32 rounded bg-gray-200"})]})]},a))}),(0,s.jsx)("div",{className:"h-64 rounded-xl bg-gray-200 animate-pulse"})]})]}):0===P.length?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Your Cart"}),(0,s.jsxs)("div",{className:"rounded-xl bg-white py-20 text-center shadow-sm",children:[(0,s.jsx)(m.FiShoppingCart,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),(0,s.jsx)("p",{className:"text-lg font-medium text-gray-500",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Browse our menu and add some delicious items!"}),(0,s.jsxs)(l.default,{href:"/menu",className:"mt-6 inline-flex items-center gap-2 rounded-xl bg-[#c47a5a] px-6 py-3 font-medium text-white transition-colors hover:bg-[#b56a4a]",children:[(0,s.jsx)(m.FiShoppingBag,{className:"h-5 w-5"}),"Browse Menu"]})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Your Cart"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:[P.length," item",1!==P.length?"s":""," in your cart"]})]}),(0,s.jsxs)("button",{onClick:q,disabled:j,className:"flex items-center gap-2 rounded-lg border border-red-200 px-4 py-2 text-sm font-medium text-red-500 transition-colors hover:bg-red-50 disabled:opacity-50",children:[j?(0,s.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-red-500 border-t-transparent"}):(0,s.jsx)(m.FiTrash2,{className:"h-4 w-4"}),"Clear Cart"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,s.jsxs)("div",{className:"space-y-4 lg:col-span-2",children:[P.map(e=>(0,s.jsxs)("div",{className:"flex gap-4 rounded-xl bg-white p-4 shadow-sm",children:[(0,s.jsx)(l.default,{href:`/menu/${e.product._id}`,className:"shrink-0",children:(0,s.jsx)(r.default,{src:(0,i.getImageUrl)(e.product.image),alt:e.product.name,width:80,height:80,unoptimized:!0,className:"h-20 w-20 rounded-lg object-cover"})}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.default,{href:`/menu/${e.product._id}`,className:"text-sm font-semibold text-gray-800 hover:text-[#c47a5a] transition-colors",children:e.product.name}),(0,s.jsxs)("div",{className:"mt-0.5 flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:`inline-flex h-4 w-4 items-center justify-center rounded-sm border ${e.product.isVeg?"border-green-500":"border-red-500"}`,children:(0,s.jsx)("span",{className:`h-1.5 w-1.5 rounded-full ${e.product.isVeg?"bg-green-500":"bg-red-500"}`})}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:["₹",e.product.price.toFixed(2)," each"]})]})]}),(0,s.jsxs)("span",{className:"text-sm font-bold text-gray-800",children:["₹",(e.product.price*e.quantity).toFixed(2)]})]})}),(0,s.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center rounded-lg border border-gray-200",children:[(0,s.jsx)("button",{onClick:()=>_(e.product._id,e.quantity-1),disabled:e.quantity<=1||b===e.product._id,className:"flex h-8 w-8 items-center justify-center text-gray-600 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-40",children:(0,s.jsx)(m.FiMinus,{className:"h-3.5 w-3.5"})}),(0,s.jsx)("span",{className:"flex h-8 w-10 items-center justify-center border-x border-gray-200 text-xs font-semibold text-gray-800",children:b===e.product._id?(0,s.jsx)("span",{className:"h-3 w-3 animate-spin rounded-full border-2 border-[#c47a5a] border-t-transparent"}):e.quantity}),(0,s.jsx)("button",{onClick:()=>_(e.product._id,e.quantity+1),disabled:e.quantity>=20||b===e.product._id,className:"flex h-8 w-8 items-center justify-center text-gray-600 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-40",children:(0,s.jsx)(m.FiPlus,{className:"h-3.5 w-3.5"})})]}),(0,s.jsxs)("button",{onClick:()=>k(e.product._id),disabled:f===e.product._id,className:"flex items-center gap-1 text-xs font-medium text-red-400 transition-colors hover:text-red-600 disabled:opacity-50",children:[f===e.product._id?(0,s.jsx)("span",{className:"h-3.5 w-3.5 animate-spin rounded-full border-2 border-red-400 border-t-transparent"}):(0,s.jsx)(m.FiTrash2,{className:"h-3.5 w-3.5"}),"Remove"]})]})]})]},e._id)),(0,s.jsxs)(l.default,{href:"/menu",className:"inline-flex items-center gap-2 text-sm font-medium text-[#c47a5a] transition-colors hover:underline",children:[(0,s.jsx)(m.FiArrowLeft,{className:"h-4 w-4"}),"Continue Shopping"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"rounded-xl bg-white p-5 shadow-sm",children:[(0,s.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-800",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-medium text-gray-700",children:["₹",$.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Tax (5%)"}),(0,s.jsxs)("span",{className:"font-medium text-gray-700",children:["₹",A.toFixed(2)]})]}),(0,s.jsx)("div",{className:"border-t border-gray-100 pt-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-base font-semibold text-gray-800",children:"Total"}),(0,s.jsxs)("span",{className:"text-xl font-bold text-gray-800",children:["₹",B.toFixed(2)]})]})})]})]}),(0,s.jsxs)("form",{onSubmit:F(T),className:"rounded-xl bg-white p-5 shadow-sm",children:[(0,s.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-800",children:"Checkout"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"tableNumber",className:"mb-1 block text-sm font-medium text-gray-700",children:["Table Number"," ",(0,s.jsx)("span",{className:"text-gray-400",children:"(optional)"})]}),(0,s.jsx)("input",{id:"tableNumber",type:"text",placeholder:"e.g. 5",...z("tableNumber"),className:"w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm text-gray-700 placeholder-gray-400 outline-none transition-colors focus:border-[#c47a5a] focus:ring-1 focus:ring-[#c47a5a]"}),S.tableNumber&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:S.tableNumber.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"notes",className:"mb-1 block text-sm font-medium text-gray-700",children:["Notes ",(0,s.jsx)("span",{className:"text-gray-400",children:"(optional)"})]}),(0,s.jsx)("textarea",{id:"notes",rows:3,placeholder:"Any special instructions...",...z("notes"),className:"w-full resize-none rounded-lg border border-gray-200 px-3 py-2.5 text-sm text-gray-700 placeholder-gray-400 outline-none transition-colors focus:border-[#c47a5a] focus:ring-1 focus:ring-[#c47a5a]"}),S.notes&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:S.notes.message})]}),(0,s.jsxs)("button",{type:"submit",disabled:v,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-[#c47a5a] px-6 py-3 font-semibold text-white transition-colors hover:bg-[#b56a4a] disabled:cursor-not-allowed disabled:opacity-50",children:[v?(0,s.jsx)("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}):(0,s.jsx)(m.FiShoppingBag,{className:"h-5 w-5"}),v?"Placing Order...":"Place Order"]})]})]})]})]})]})}e.s(["default",()=>u])}]);