(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6115,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(9165),r=e.i(54338),l=e.i(5766),d=e.i(92199);let i=["pending","confirmed","preparing","served","completed","cancelled"],n={pending:"confirmed",confirmed:"preparing",preparing:"served",served:"completed",completed:null,cancelled:null};function c(){let{user:e}=(0,r.useAuth)(),[c,x]=(0,s.useState)([]),[o,m]=(0,s.useState)({page:1,limit:10,total:0,pages:1}),[p,g]=(0,s.useState)(!0),[h,u]=(0,s.useState)(""),[y,j]=(0,s.useState)(null),[b,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{f()},[o.page,h]);let f=async()=>{g(!0);try{let e={page:o.page,limit:o.limit};h&&(e.status=h);let t=await a.default.get("/orders/all",{params:e});x(t.data.orders||t.data.data||[]),t.data.pagination&&m(t.data.pagination)}catch{l.default.error("Failed to load orders")}finally{g(!1)}},v=async(e,t)=>{N(e);try{await a.default.put(`/orders/${e}/status`,{status:t}),x(s=>s.map(s=>s._id===e?{...s,status:t}:s)),l.default.success(`Order status updated to ${t}`)}catch(e){l.default.error(e.response?.data?.message||"Failed to update status")}finally{N(null)}};return p&&0===c.length?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[#c47a5a] border-t-transparent"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Orders"}),(0,t.jsx)("p",{className:"mt-1 text-gray-500",children:"Manage and track all orders"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("button",{onClick:()=>{u(""),m(e=>({...e,page:1}))},className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${""===h?"bg-[#c47a5a] text-white":"bg-white text-gray-600 shadow-sm hover:bg-gray-50"}`,children:"All"}),i.map(e=>(0,t.jsx)("button",{onClick:()=>{u(e),m(e=>({...e,page:1}))},className:`rounded-lg px-4 py-2 text-sm font-medium capitalize transition-colors ${h===e?"bg-[#c47a5a] text-white":"bg-white text-gray-600 shadow-sm hover:bg-gray-50"}`,children:e},e))]}),(0,t.jsx)("div",{className:"overflow-x-auto rounded-xl bg-white shadow-sm",children:(0,t.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Order ID"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Customer"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Items"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Table"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Total"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Paid"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Date"}),(0,t.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:0===c.length?(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:9,className:"px-4 py-12 text-center text-gray-400",children:[(0,t.jsx)(d.FiShoppingBag,{className:"mx-auto mb-2 h-10 w-10"}),(0,t.jsx)("p",{children:"No orders found."})]})}):c.map(e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("tr",{onClick:()=>j(y===e._id?null:e._id),className:"cursor-pointer border-b border-gray-50 hover:bg-gray-50/50",children:[(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[y===e._id?(0,t.jsx)(d.FiChevronUp,{className:"h-4 w-4 text-gray-400"}):(0,t.jsx)(d.FiChevronDown,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("span",{className:"font-mono text-xs font-medium text-gray-800",children:["#",e._id.slice(-6).toUpperCase()]})]})}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-600",children:"object"==typeof e.user&&null!==e.user?e.user.name:"Customer"}),(0,t.jsxs)("td",{className:"px-4 py-3 text-gray-600",children:[e.items.length," item",1!==e.items.length&&"s"]}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.tableNumber||"-"}),(0,t.jsxs)("td",{className:"px-4 py-3 font-medium text-gray-800",children:["$",e.total.toFixed(2)]}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("select",{value:e.status,onChange:t=>{t.stopPropagation(),v(e._id,t.target.value)},onClick:e=>e.stopPropagation(),disabled:b===e._id,className:`rounded-full px-2.5 py-0.5 text-xs font-medium capitalize ${(e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"preparing":return"bg-orange-100 text-orange-800";case"served":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)} cursor-pointer border-none focus:outline-none focus:ring-2 focus:ring-[#c47a5a]`,children:i.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:`inline-block rounded-full px-2.5 py-0.5 text-xs font-medium ${e.isPaid?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.isPaid?"Paid":"Unpaid"})}),(0,t.jsx)("td",{className:"px-4 py-3 text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-4 py-3",children:n[e.status]&&(0,t.jsxs)("button",{onClick:t=>{let s;t.stopPropagation(),(s=n[e.status])&&v(e._id,s)},disabled:b===e._id,className:"inline-flex items-center gap-1 rounded-lg bg-[#c47a5a]/10 px-3 py-1.5 text-xs font-medium text-[#c47a5a] transition-colors hover:bg-[#c47a5a]/20 disabled:opacity-50",children:[(0,t.jsx)(d.FiCheckCircle,{className:"h-3.5 w-3.5"}),n[e.status]]})})]},e._id),y===e._id&&(0,t.jsx)("tr",{className:"border-b border-gray-100",children:(0,t.jsx)("td",{colSpan:9,className:"bg-gray-50/50 px-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Order Items"}),(0,t.jsx)("div",{className:"space-y-2",children:e.items.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg bg-white px-4 py-2 shadow-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-800",children:e.name}),(0,t.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["x",e.quantity]})]}),(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-800",children:["$",(e.price*e.quantity).toFixed(2)]})]},s))}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-6 rounded-lg bg-white px-4 py-3 text-sm shadow-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Subtotal: "}),(0,t.jsxs)("span",{className:"font-medium text-gray-800",children:["$",e.subtotal.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Tax: "}),(0,t.jsxs)("span",{className:"font-medium text-gray-800",children:["$",e.tax.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Total: "}),(0,t.jsxs)("span",{className:"font-semibold text-gray-800",children:["$",e.total.toFixed(2)]})]}),e.notes&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Notes: "}),(0,t.jsx)("span",{className:"text-gray-700",children:e.notes})]})]})]})})},`${e._id}-details`)]}))})]})}),o.pages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing page ",o.page," of ",o.pages," (",o.total," orders)"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>m(e=>({...e,page:e.page-1})),disabled:o.page<=1,className:"rounded-lg border border-gray-200 p-2 text-gray-600 transition-colors hover:bg-gray-50 disabled:opacity-50",children:(0,t.jsx)(d.FiChevronLeft,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:()=>m(e=>({...e,page:e.page+1})),disabled:o.page>=o.pages,className:"rounded-lg border border-gray-200 p-2 text-gray-600 transition-colors hover:bg-gray-50 disabled:opacity-50",children:(0,t.jsx)(d.FiChevronRight,{className:"h-4 w-4"})})]})]})]})}e.s(["default",()=>c])}]);