(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,60780,e=>{"use strict";var s=e.i(81307);let a=s.z.object({email:s.z.string().email("Valid email is required"),password:s.z.string().min(1,"Password is required")}),r=s.z.object({name:s.z.string().min(2,"Name must be at least 2 characters"),email:s.z.string().email("Valid email is required"),password:s.z.string().min(6,"Password must be at least 6 characters"),confirmPassword:s.z.string().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),t=s.z.object({email:s.z.string().email("Valid email is required")}),i=s.z.object({password:s.z.string().min(6,"Password must be at least 6 characters"),confirmPassword:s.z.string().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),l=s.z.object({name:s.z.string().min(2,"Name must be at least 2 characters"),email:s.z.string().email("Valid email is required")}),o=s.z.object({currentPassword:s.z.string().min(1,"Current password is required"),newPassword:s.z.string().min(6,"New password must be at least 6 characters"),confirmNewPassword:s.z.string().min(1,"Please confirm your password")}).refine(e=>e.newPassword===e.confirmNewPassword,{message:"Passwords don't match",path:["confirmNewPassword"]});e.s(["forgotPasswordSchema",0,t,"loginSchema",0,a,"resetPasswordSchema",0,i,"signupSchema",0,r,"updatePasswordSchema",0,o,"updateProfileSchema",0,l])},69859,e=>{"use strict";var s=e.i(43476),a=e.i(71645),r=e.i(53145),t=e.i(94814),i=e.i(60780),l=e.i(54338),o=e.i(9165),d=e.i(5766),n=e.i(57688),c=e.i(92199);function m(){let{user:e,setUser:m}=(0,l.useAuth)(),[u,x]=(0,a.useState)("profile"),[p,h]=(0,a.useState)(!1),g=(0,a.useRef)(null),{register:f,handleSubmit:w,formState:{errors:b,isSubmitting:y}}=(0,r.useForm)({resolver:(0,t.zodResolver)(i.updateProfileSchema),values:{name:e?.name||"",email:e?.email||""}}),{register:j,handleSubmit:N,formState:{errors:v,isSubmitting:P},reset:z}=(0,r.useForm)({resolver:(0,t.zodResolver)(i.updatePasswordSchema)}),S=async e=>{try{let s=await o.default.put("/auth/me",e);m(s.data.user),d.default.success("Profile updated successfully")}catch(e){d.default.error(e.response?.data?.message||"Failed to update profile")}},k=async e=>{try{await o.default.put("/auth/update-password",{currentPassword:e.currentPassword,newPassword:e.newPassword}),d.default.success("Password updated successfully"),z()}catch(e){d.default.error(e.response?.data?.message||"Failed to update password")}},F=async e=>{let s=e.target.files?.[0];if(!s)return;let a=new FormData;a.append("avatar",s);try{h(!0);let e=await o.default.put("/auth/me/avatar",a);m(e.data.user),d.default.success("Avatar updated successfully")}catch(e){d.default.error(e.response?.data?.message||"Failed to upload avatar")}finally{h(!1),g.current&&(g.current.value="")}};return e?(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"relative bg-linear-to-r from-primary to-[#d4956f] rounded-2xl p-8 mb-8 text-white overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/10"}),(0,s.jsxs)("div",{className:"relative flex flex-col items-center text-center",children:[(0,s.jsxs)("div",{className:"relative group mb-4",children:[(0,s.jsx)("div",{className:"w-[120px] h-[120px] rounded-full border-4 border-white/30 overflow-hidden bg-white/20 flex items-center justify-center",children:e.avatar?(0,s.jsx)(n.default,{src:(0,o.getImageUrl)(e.avatar),alt:e.name,width:120,height:120,className:"w-full h-full object-cover",unoptimized:!0}):(0,s.jsx)("span",{className:"text-4xl font-bold text-white",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})}),(0,s.jsx)("button",{type:"button",onClick:()=>g.current?.click(),disabled:p,className:"absolute inset-0 rounded-full bg-black/0 group-hover:bg-black/40 flex items-center justify-center transition-colors cursor-pointer",children:(0,s.jsx)(c.FiCamera,{size:24,className:"text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),(0,s.jsx)("input",{ref:g,type:"file",accept:"image/*",onChange:F,className:"hidden"}),p&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:e.name}),(0,s.jsx)("p",{className:"text-white/80 text-sm mt-1",children:e.email})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"md:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-5",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:"Account Info"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(c.FiShield,{className:"text-primary",size:18})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Role"}),(0,s.jsx)("span",{className:"inline-block mt-0.5 rounded-full bg-primary/10 text-primary px-2.5 py-0.5 text-xs font-semibold capitalize",children:e.role})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(c.FiCalendar,{className:"text-primary",size:18})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Member Since"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(c.FiMail,{className:"text-primary",size:18})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Email"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 break-all",children:e.email})]})]})]})}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>x("profile"),className:`flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-all ${"profile"===u?"bg-primary text-white shadow-md shadow-primary/25":"bg-white text-gray-500 hover:bg-gray-50 shadow-sm"}`,children:[(0,s.jsx)(c.FiEdit3,{size:14}),"Edit Profile"]}),(0,s.jsxs)("button",{onClick:()=>x("password"),className:`flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-all ${"password"===u?"bg-primary text-white shadow-md shadow-primary/25":"bg-white text-gray-500 hover:bg-gray-50 shadow-sm"}`,children:[(0,s.jsx)(c.FiLock,{size:14}),"Change Password"]})]}),"profile"===u&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-5",children:"Edit Profile"}),(0,s.jsxs)("form",{onSubmit:w(S),className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Full Name"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.FiUser,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{...f("name"),className:"w-full pl-11 pr-4 py-3 rounded-lg border border-gray-200 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all",placeholder:"Enter your name"})]}),b.name&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1.5",children:b.name.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email Address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.FiMail,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{...f("email"),type:"email",className:"w-full pl-11 pr-4 py-3 rounded-lg border border-gray-200 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all",placeholder:"Enter your email"})]}),b.email&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1.5",children:b.email.message})]}),(0,s.jsx)("button",{type:"submit",disabled:y,className:"w-full py-3 bg-primary text-white rounded-lg font-semibold hover:bg-[#b06a4a] transition-colors disabled:opacity-50 shadow-md shadow-primary/20",children:y?"Saving...":"Save Changes"})]})]}),"password"===u&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-5",children:"Change Password"}),(0,s.jsxs)("form",{onSubmit:N(k),className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Current Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.FiLock,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{...j("currentPassword"),type:"password",className:"w-full pl-11 pr-4 py-3 rounded-lg border border-gray-200 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all",placeholder:"Enter current password"})]}),v.currentPassword&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1.5",children:v.currentPassword.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.FiLock,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{...j("newPassword"),type:"password",className:"w-full pl-11 pr-4 py-3 rounded-lg border border-gray-200 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all",placeholder:"Enter new password"})]}),v.newPassword&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1.5",children:v.newPassword.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Confirm New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.FiLock,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{...j("confirmNewPassword"),type:"password",className:"w-full pl-11 pr-4 py-3 rounded-lg border border-gray-200 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all",placeholder:"Confirm new password"})]}),v.confirmNewPassword&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1.5",children:v.confirmNewPassword.message})]}),(0,s.jsx)("button",{type:"submit",disabled:P,className:"w-full py-3 bg-primary text-white rounded-lg font-semibold hover:bg-[#b06a4a] transition-colors disabled:opacity-50 shadow-md shadow-primary/20",children:P?"Updating...":"Update Password"})]})]})]})]})]}):null}e.s(["default",()=>m])}]);