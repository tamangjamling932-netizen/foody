(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61829,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(9165),r=e.i(54338),l=e.i(5766),n=e.i(22016),d=e.i(92199);let o=["customer","staff","admin"],i=e=>{switch(e){case"admin":return"bg-red-100 text-red-700";case"staff":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-600"}};function c(){let{user:e}=(0,r.useAuth)(),[c,u]=(0,a.useState)([]),[m,x]=(0,a.useState)(!0),[h,f]=(0,a.useState)(""),[p,g]=(0,a.useState)([]),[y,b]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[w,v]=(0,a.useState)(!1),[C,S]=(0,a.useState)({name:"",email:"",password:"",role:"customer"}),[k,F]=(0,a.useState)(!1);(0,a.useEffect)(()=>{_()},[]),(0,a.useEffect)(()=>{if(h.trim()){let e=h.toLowerCase();g(c.filter(s=>s.name.toLowerCase().includes(e)||s.email.toLowerCase().includes(e)||s.role.toLowerCase().includes(e)))}else g(c)},[h,c]);let _=async()=>{x(!0);try{let e=await t.default.get("/users");u(e.data.users||e.data||[])}catch{l.default.error("Failed to load users")}finally{x(!1)}},U=async(s,a)=>{if(s===e?._id)return void l.default.error("You cannot change your own role");b(s);try{await t.default.put(`/users/${s}/role`,{role:a}),u(e=>e.map(e=>e._id===s?{...e,role:a}:e)),l.default.success(`Role updated to ${a}`)}catch(e){l.default.error(e.response?.data?.message||"Failed to update role")}finally{b(null)}},A=async s=>{if(s===e?._id)return void l.default.error("You cannot delete your own account");if(!j){N(s);try{await t.default.delete(`/users/${s}`),l.default.success("User deleted"),u(e=>e.filter(e=>e._id!==s))}catch(e){l.default.error(e.response?.data?.message||"Failed to delete user")}finally{N(null)}}},$=async()=>{if(!C.name||!C.email||!C.password)return void l.default.error("All fields are required");F(!0);try{await t.default.post("/users",C),l.default.success("User created successfully"),v(!1),S({name:"",email:"",password:"",role:"customer"}),_()}catch(e){l.default.error(e.response?.data?.message||"Failed to create user")}finally{F(!1)}};return m?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[#c47a5a] border-t-transparent"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Users"}),(0,s.jsx)("p",{className:"mt-1 text-gray-500",children:"Manage user accounts and roles"})]}),(0,s.jsxs)("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-2 rounded-lg bg-[#c47a5a] px-4 py-2.5 text-sm font-medium text-white shadow-sm transition-colors hover:bg-[#b06a4a]",children:[(0,s.jsx)(d.FiPlus,{className:"h-4 w-4"}),"Create User"]})]}),(0,s.jsxs)("div",{className:"relative max-w-md",children:[(0,s.jsx)(d.FiSearch,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by name, email, or role...",value:h,onChange:e=>f(e.target.value),className:"w-full rounded-lg border border-gray-200 py-2.5 pl-10 pr-4 text-sm focus:border-[#c47a5a] focus:outline-none focus:ring-1 focus:ring-[#c47a5a]"})]}),(0,s.jsx)("div",{className:"overflow-x-auto rounded-xl bg-white shadow-sm",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,s.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"User"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Email"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Role"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Joined"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===p.length?(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:5,className:"px-4 py-12 text-center text-gray-400",children:[(0,s.jsx)(d.FiUsers,{className:"mx-auto mb-2 h-10 w-10"}),(0,s.jsx)("p",{children:"No users found."})]})}):p.map(a=>{let t=a._id===e?._id,r="admin"===a.role?d.FiShield:d.FiUser;return(0,s.jsxs)("tr",{className:"border-b border-gray-50 hover:bg-gray-50/50 cursor-pointer",onClick:()=>window.location.href=`/admin/users/${a._id}`,children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)(n.default,{href:`/admin/users/${a._id}`,className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-[#c47a5a]/10",children:(0,s.jsx)(r,{className:"h-4 w-4 text-[#c47a5a]"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"font-medium text-gray-800",children:[a.name,t&&(0,s.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:"(you)"})]})})]})}),(0,s.jsx)("td",{className:"px-4 py-3 text-gray-600",children:a.email}),(0,s.jsx)("td",{className:"px-4 py-3",onClick:e=>e.stopPropagation(),children:t?(0,s.jsx)("span",{className:`inline-block rounded-full px-2.5 py-0.5 text-xs font-medium capitalize ${i(a.role)}`,children:a.role}):(0,s.jsx)("select",{value:a.role,onChange:e=>U(a._id,e.target.value),disabled:y===a._id,className:`rounded-full px-2.5 py-0.5 text-xs font-medium capitalize ${i(a.role)} cursor-pointer border-none focus:outline-none focus:ring-2 focus:ring-[#c47a5a]`,children:o.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})}),(0,s.jsx)("td",{className:"px-4 py-3 text-xs text-gray-500",children:new Date(a.createdAt).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-4 py-3",onClick:e=>e.stopPropagation(),children:!t&&(0,s.jsx)("button",{onClick:()=>{confirm(`Are you sure you want to delete ${a.name}?`)&&A(a._id)},disabled:j===a._id,className:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-500 disabled:opacity-50",children:(0,s.jsx)(d.FiTrash2,{className:"h-4 w-4"})})})]},a._id)})})]})}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[p.length," user",1!==p.length&&"s"," total"]}),w&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"mx-4 w-full max-w-md rounded-xl bg-white p-6 shadow-lg",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Create User"}),(0,s.jsx)("button",{onClick:()=>v(!1),className:"rounded-lg p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:(0,s.jsx)(d.FiX,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",value:C.name,onChange:e=>S({...C,name:e.target.value}),placeholder:"Full name",className:"w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm focus:border-[#c47a5a] focus:outline-none focus:ring-1 focus:ring-[#c47a5a]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{type:"email",value:C.email,onChange:e=>S({...C,email:e.target.value}),placeholder:"email@example.com",className:"w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm focus:border-[#c47a5a] focus:outline-none focus:ring-1 focus:ring-[#c47a5a]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsx)("input",{type:"password",value:C.password,onChange:e=>S({...C,password:e.target.value}),placeholder:"Password",className:"w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm focus:border-[#c47a5a] focus:outline-none focus:ring-1 focus:ring-[#c47a5a]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Role"}),(0,s.jsxs)("select",{value:C.role,onChange:e=>S({...C,role:e.target.value}),className:"w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm focus:border-[#c47a5a] focus:outline-none focus:ring-1 focus:ring-[#c47a5a]",children:[(0,s.jsx)("option",{value:"customer",children:"Customer"}),(0,s.jsx)("option",{value:"staff",children:"Staff"}),(0,s.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>v(!1),className:"rounded-lg border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:$,disabled:k,className:"inline-flex items-center gap-2 rounded-lg bg-[#c47a5a] px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-[#b06a4a] disabled:opacity-50",children:k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Creating..."]}):"Create User"})]})]})})]})}e.s(["default",()=>c])}]);