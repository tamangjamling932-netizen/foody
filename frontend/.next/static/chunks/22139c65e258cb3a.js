(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41215,e=>{"use strict";var s=e.i(43476),a=e.i(71645),l=e.i(54338),t=e.i(9165),r=e.i(18566),i=e.i(22016),d=e.i(92199);function n(){let{user:e}=(0,l.useAuth)();(0,r.useRouter)();let[n,c]=(0,a.useState)(null),[o,m]=(0,a.useState)(!0),x=e?.role==="admin",h=e?.role==="staff";(0,a.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await t.default.get("/stats/dashboard");c(e.data.stats||e.data)}catch(e){console.error("Failed to load dashboard stats:",e)}finally{m(!1)}};if(o)return(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[var(--primary)] border-t-transparent"})});if(!n)return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[(0,s.jsx)(d.FiTrendingUp,{className:"mb-3 h-12 w-12"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"Unable to load dashboard data"}),(0,s.jsx)("button",{onClick:g,className:"mt-4 rounded-lg bg-[var(--primary)] px-4 py-2 text-sm font-medium text-white hover:opacity-90",children:"Retry"})]});let u=[{label:"Total Orders",value:n.totalOrders??0,icon:d.FiShoppingBag,iconBg:"bg-[#c47a5a]/10",iconColor:"text-[#c47a5a]",show:!0},{label:"Today's Orders",value:n.todayOrders??0,icon:d.FiCalendar,iconBg:"bg-indigo-100",iconColor:"text-indigo-600",show:!0},{label:"Pending Orders",value:n.pendingOrders??0,icon:d.FiClock,iconBg:"bg-yellow-100",iconColor:"text-yellow-600",show:!0},{label:"Total Products",value:n.totalProducts??0,icon:d.FiBox,iconBg:"bg-blue-100",iconColor:"text-blue-600",show:!0},{label:"Total Users",value:n.totalUsers??0,icon:d.FiUsers,iconBg:"bg-purple-100",iconColor:"text-purple-600",show:x},{label:"Total Revenue",value:`₹${(n.totalRevenue??0).toLocaleString("en-IN",{minimumFractionDigits:2})}`,icon:d.FiDollarSign,iconBg:"bg-green-100",iconColor:"text-green-600",show:x},{label:"Total Bills",value:n.totalBills??0,icon:d.FiFileText,iconBg:"bg-rose-100",iconColor:"text-rose-600",show:x}],p=[{label:"Manage Orders",href:"/admin/orders",icon:d.FiShoppingBag,show:!0},{label:"Manage Products",href:"/admin/products",icon:d.FiPackage,show:!0},{label:"Manage Categories",href:"/admin/categories",icon:d.FiBox,show:!0},{label:"Manage Users",href:"/admin/users",icon:d.FiUsers,show:x},{label:"Manage Bills",href:"/admin/bills",icon:d.FiFileText,show:x},{label:"Manage Reviews",href:"/admin/reviews",icon:d.FiStar,show:x}],f=n.dailyOrders||[],b=n.ordersByStatus||{},j=n.topProducts||[];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-800",children:[h?"Staff":"Admin"," Dashboard"]}),(0,s.jsxs)("p",{className:"mt-1 text-gray-500",children:["Welcome back, ",e?.name?.split(" ")[0]||"Admin",". Here's your overview."]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4",children:u.filter(e=>e.show).map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4 rounded-xl bg-white p-5 shadow-sm",children:[(0,s.jsx)("div",{className:`flex h-12 w-12 shrink-0 items-center justify-center rounded-lg ${e.iconBg}`,children:(0,s.jsx)(e.icon,{className:`h-6 w-6 ${e.iconColor}`})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"truncate text-sm text-gray-500",children:e.label}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:e.value})]})]},e.label))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[f.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-4",children:"Orders This Week"}),(0,s.jsx)("div",{className:"h-48 flex items-end gap-2",children:f.map(e=>{let a=Math.max(...f.map(e=>e.count),1),l=e.count/a*100;return(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-gray-600",children:e.count}),(0,s.jsx)("div",{className:"w-full bg-[var(--primary)] rounded-t-md transition-all min-h-[4px]",style:{height:`${l}%`}}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:e._id.slice(5)})]},e._id)})})]}),Object.keys(b).length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-4",children:"Order Status"}),(0,s.jsx)("div",{className:"space-y-3",children:Object.entries(b).map(([e,a])=>{let l=a/(n.totalOrders||1)*100;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,s.jsx)("span",{className:"capitalize text-gray-600",children:e}),(0,s.jsx)("span",{className:"font-medium",children:a})]}),(0,s.jsx)("div",{className:"h-2.5 bg-gray-100 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full transition-all",style:{width:`${l}%`,backgroundColor:{pending:"#f59e0b",confirmed:"#3b82f6",preparing:"#f97316",served:"#8b5cf6",completed:"#22c55e",cancelled:"#ef4444"}[e]||"#c47a5a"}})})]},e)})})]}),x&&j.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-4",children:"Top Products"}),(0,s.jsx)("div",{className:"space-y-3",children:j.map((e,a)=>{let l=j[0]?.totalQuantity||1;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,s.jsx)("span",{className:"text-gray-600 truncate mr-2",children:e._id}),(0,s.jsxs)("span",{className:"font-medium text-[var(--primary)] whitespace-nowrap",children:[e.totalQuantity," sold"]})]}),(0,s.jsx)("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-[var(--primary)] rounded-full",style:{width:`${e.totalQuantity/l*100}%`}})})]},a)})})]}),x&&f.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-4",children:"Revenue This Week"}),(0,s.jsx)("div",{className:"h-48 flex items-end gap-2",children:f.map(e=>{let a=Math.max(...f.map(e=>e.revenue||0),1),l=e.revenue||0,t=l/a*100;return(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,s.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:["₹",l.toLocaleString("en-IN")]}),(0,s.jsx)("div",{className:"w-full bg-emerald-500 rounded-t-md transition-all min-h-[4px]",style:{height:`${t}%`}}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:e._id.slice(5)})]},e._id)})})]})]}),h&&(0,s.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Today's Orders"}),(0,s.jsxs)(i.default,{href:"/admin/orders",className:"flex items-center gap-1 text-sm font-medium text-[var(--primary)] hover:underline",children:["View All ",(0,s.jsx)(d.FiArrowRight,{className:"h-4 w-4"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-xl bg-indigo-100",children:(0,s.jsx)(d.FiCalendar,{className:"h-8 w-8 text-indigo-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:n.todayOrders??0}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"orders placed today"})]})]})]}),(0,s.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-800",children:"Quick Links"}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3",children:p.filter(e=>e.show).map(e=>(0,s.jsxs)(i.default,{href:e.href,className:"flex items-center justify-between rounded-lg border border-gray-100 p-3 transition-colors hover:bg-[var(--primary)]/5 hover:border-[var(--primary)]/20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(e.icon,{className:"h-5 w-5 text-[var(--primary)]"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label})]}),(0,s.jsx)(d.FiArrowRight,{className:"h-4 w-4 text-gray-400"})]},e.label))})]})]})}e.s(["default",()=>n])}]);