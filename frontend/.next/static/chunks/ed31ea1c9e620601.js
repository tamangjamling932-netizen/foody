(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57635,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(9165),l=e.i(54338),d=e.i(5766),i=e.i(57688),n=e.i(22016),c=e.i(92199);let x=["customer","staff","admin"],o=e=>{switch(e){case"admin":return"bg-red-100 text-red-700";case"staff":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-600"}};function m(){let e=(0,a.useParams)();(0,a.useRouter)();let{user:m}=(0,l.useAuth)(),u=e.id,[h,p]=(0,s.useState)(null),[f,g]=(0,s.useState)([]),[y,j]=(0,s.useState)(!0),[N,b]=(0,s.useState)(""),[v,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{u&&F()},[u]);let F=async()=>{j(!0),b("");try{let[e,t]=await Promise.all([r.default.get(`/users/${u}`),r.default.get(`/users/${u}/orders`).catch(()=>({data:{orders:[]}}))]);p(e.data.user||e.data),g(t.data.orders||t.data||[])}catch(e){b(e.response?.data?.message||"Failed to load user details"),d.default.error("Failed to load user details")}finally{j(!1)}},S=async e=>{if(h){if(h._id===m?._id)return void d.default.error("You cannot change your own role");w(!0);try{await r.default.put(`/users/${u}/role`,{role:e}),p(t=>t?{...t,role:e}:t),d.default.success(`Role updated to ${e}`)}catch(e){d.default.error(e.response?.data?.message||"Failed to update role")}finally{w(!1)}}};if(y)return(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[#c47a5a] border-t-transparent"})});if(N||!h)return(0,t.jsxs)("div",{className:"space-y-4 py-20 text-center",children:[(0,t.jsx)("p",{className:"text-gray-500",children:N||"User not found"}),(0,t.jsxs)(n.default,{href:"/admin/users",className:"inline-flex items-center gap-2 text-sm text-[#c47a5a] hover:underline",children:[(0,t.jsx)(c.FiArrowLeft,{className:"h-4 w-4"}),"Back to Users"]})]});let U=h._id===m?._id,$=h.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(n.default,{href:"/admin/users",className:"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-[#c47a5a] transition-colors",children:[(0,t.jsx)(c.FiArrowLeft,{className:"h-4 w-4"}),"Back to Users"]}),(0,t.jsx)("div",{className:"rounded-xl bg-white p-6 shadow-sm",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:h.avatar?(0,t.jsx)(i.default,{src:(0,r.getImageUrl)(h.avatar),alt:h.name,width:80,height:80,className:"h-20 w-20 rounded-full object-cover"}):(0,t.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-[#c47a5a]/10 text-2xl font-bold text-[#c47a5a]",children:$})}),(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-800",children:[h.name,U&&(0,t.jsx)("span",{className:"ml-2 text-sm font-normal text-gray-400",children:"(you)"})]})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(c.FiMail,{className:"h-4 w-4"}),h.email]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(c.FiCalendar,{className:"h-4 w-4"}),"Joined ",new Date(h.createdAt).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(c.FiShield,{className:"h-4 w-4 text-gray-400"}),U?(0,t.jsx)("span",{className:`inline-block rounded-full px-3 py-1 text-xs font-medium capitalize ${o(h.role)}`,children:h.role}):(0,t.jsx)("select",{value:h.role,onChange:e=>S(e.target.value),disabled:v,className:`rounded-full px-3 py-1 text-xs font-medium capitalize ${o(h.role)} cursor-pointer border-none focus:outline-none focus:ring-2 focus:ring-[#c47a5a] disabled:opacity-50`,children:x.map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),v&&(0,t.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-[#c47a5a] border-t-transparent"})]})]})]})}),(0,t.jsxs)("div",{className:"rounded-xl bg-white shadow-sm",children:[(0,t.jsx)("div",{className:"border-b border-gray-100 px-6 py-4",children:(0,t.jsxs)("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[(0,t.jsx)(c.FiPackage,{className:"h-5 w-5 text-[#c47a5a]"}),"Order History",(0,t.jsxs)("span",{className:"ml-1 text-sm font-normal text-gray-400",children:["(",f.length,")"]})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,t.jsx)("th",{className:"px-6 py-3 font-medium text-gray-500",children:"Order ID"}),(0,t.jsx)("th",{className:"px-6 py-3 font-medium text-gray-500",children:"Items"}),(0,t.jsx)("th",{className:"px-6 py-3 font-medium text-gray-500",children:"Total"}),(0,t.jsx)("th",{className:"px-6 py-3 font-medium text-gray-500",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 font-medium text-gray-500",children:"Date"})]})}),(0,t.jsx)("tbody",{children:0===f.length?(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400",children:[(0,t.jsx)(c.FiPackage,{className:"mx-auto mb-2 h-10 w-10"}),(0,t.jsx)("p",{children:"No orders found for this user."})]})}):f.map(e=>(0,t.jsxs)("tr",{className:"border-b border-gray-50 hover:bg-gray-50/50",children:[(0,t.jsx)("td",{className:"px-6 py-3 font-mono text-xs text-gray-600",children:e._id.slice(-8).toUpperCase()}),(0,t.jsxs)("td",{className:"px-6 py-3 text-gray-600",children:[e.items.length," item",1!==e.items.length&&"s"]}),(0,t.jsxs)("td",{className:"px-6 py-3 font-medium text-gray-800",children:["$",e.total.toFixed(2)]}),(0,t.jsx)("td",{className:"px-6 py-3",children:(0,t.jsx)("span",{className:`inline-block rounded-full px-2.5 py-0.5 text-xs font-medium capitalize ${(e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-700";case"confirmed":return"bg-blue-100 text-blue-700";case"preparing":return"bg-orange-100 text-orange-700";case"served":return"bg-purple-100 text-purple-700";case"completed":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-600"}})(e.status)}`,children:e.status})}),(0,t.jsx)("td",{className:"px-6 py-3 text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]},e._id))})]})})]})]})}e.s(["default",()=>m])}]);