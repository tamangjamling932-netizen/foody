(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54338,e=>{"use strict";var t=e.i(71645),a=e.i(9165);let n={user:null,loading:!0},o=new Set,r=!1;function l(e){n={...n,...e},o.forEach(e=>e())}function u(e,t,a){if("u"<typeof document)return;let n=new Date(Date.now()+864e5*a).toUTCString();document.cookie=`${e}=${t}; path=/; expires=${n}; SameSite=Lax`}function i(e){"u">typeof document&&(document.cookie=`${e}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`)}function s(){let[,e]=(0,t.useState)(0);(0,t.useEffect)(()=>{let t=()=>e(e=>e+1);return o.add(t),!function(){if(r)return;r=!0;let e=localStorage.getItem("token");e?(u("token",e,7),a.default.get("/auth/me").then(e=>{l({user:e.data.user,loading:!1})}).catch(()=>{localStorage.removeItem("token"),i("token"),l({user:null,loading:!1})})):l({user:null,loading:!1})}(),()=>{o.delete(t)}},[]);let s=(0,t.useCallback)(async(e,t)=>{let n=await a.default.post("/auth/login",{email:e,password:t}),o=n.data.token;return localStorage.setItem("token",o),u("token",o,7),l({user:n.data.user,loading:!1}),n.data},[]),c=(0,t.useCallback)(async(e,t,n)=>{let o=await a.default.post("/auth/register",{name:e,email:t,password:n}),r=o.data.token;return localStorage.setItem("token",r),u("token",r,7),l({user:o.data.user,loading:!1}),o.data},[]),d=(0,t.useCallback)(async()=>{await a.default.get("/auth/logout").catch(()=>{}),localStorage.removeItem("token"),i("token"),r=!1,l({user:null,loading:!1})},[]),f=(0,t.useCallback)(e=>{l({user:e,loading:!1})},[]);return{user:n.user,loading:n.loading,login:s,register:c,logout:d,setUser:f}}e.s(["useAuth",()=>s])},18566,(e,t,a)=>{t.exports=e.r(76562)},52683,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(18566),o=e.i(54338);function r(){let e=(0,n.useRouter)(),{user:r,loading:l}=(0,o.useAuth)();return(0,a.useEffect)(()=>{l||(r?"admin"===r.role?e.replace("/admin"):"staff"===r.role?e.replace("/admin/orders"):e.replace("/menu"):e.replace("/login"))},[r,l,e]),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[var(--primary)]"})})}e.s(["default",()=>r])}]);