module.exports=[54439,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19032),e=a.i(32636),f=a.i(6704),g=a.i(27348);let h=["pending","confirmed","preparing","served","completed","cancelled"],i={pending:"confirmed",confirmed:"preparing",preparing:"served",served:"completed",completed:null,cancelled:null};function j(){let{user:a}=(0,e.useAuth)(),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)({page:1,limit:10,total:0,pages:1}),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null);(0,c.useEffect)(()=>{v()},[l.page,p]);let v=async()=>{o(!0);try{let a={page:l.page,limit:l.limit};p&&(a.status=p);let b=await d.default.get("/orders/all",{params:a});k(b.data.orders||b.data.data||[]),b.data.pagination&&m(b.data.pagination)}catch{f.default.error("Failed to load orders")}finally{o(!1)}},w=async(a,b)=>{u(a);try{await d.default.put(`/orders/${a}/status`,{status:b}),k(c=>c.map(c=>c._id===a?{...c,status:b}:c)),f.default.success(`Order status updated to ${b}`)}catch(a){f.default.error(a.response?.data?.message||"Failed to update status")}finally{u(null)}};return n&&0===j.length?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[#c47a5a] border-t-transparent"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Orders"}),(0,b.jsx)("p",{className:"mt-1 text-gray-500",children:"Manage and track all orders"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{onClick:()=>{q(""),m(a=>({...a,page:1}))},className:`rounded-lg px-4 py-2 text-sm font-medium transition-colors ${""===p?"bg-[#c47a5a] text-white":"bg-white text-gray-600 shadow-sm hover:bg-gray-50"}`,children:"All"}),h.map(a=>(0,b.jsx)("button",{onClick:()=>{q(a),m(a=>({...a,page:1}))},className:`rounded-lg px-4 py-2 text-sm font-medium capitalize transition-colors ${p===a?"bg-[#c47a5a] text-white":"bg-white text-gray-600 shadow-sm hover:bg-gray-50"}`,children:a},a))]}),(0,b.jsx)("div",{className:"overflow-x-auto rounded-xl bg-white shadow-sm",children:(0,b.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Order ID"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Customer"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Items"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Table"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Total"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Paid"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Date"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:0===j.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:9,className:"px-4 py-12 text-center text-gray-400",children:[(0,b.jsx)(g.FiShoppingBag,{className:"mx-auto mb-2 h-10 w-10"}),(0,b.jsx)("p",{children:"No orders found."})]})}):j.map(a=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{onClick:()=>s(r===a._id?null:a._id),className:"cursor-pointer border-b border-gray-50 hover:bg-gray-50/50",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[r===a._id?(0,b.jsx)(g.FiChevronUp,{className:"h-4 w-4 text-gray-400"}):(0,b.jsx)(g.FiChevronDown,{className:"h-4 w-4 text-gray-400"}),(0,b.jsxs)("span",{className:"font-mono text-xs font-medium text-gray-800",children:["#",a._id.slice(-6).toUpperCase()]})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-gray-600",children:"object"==typeof a.user&&null!==a.user?a.user.name:"Customer"}),(0,b.jsxs)("td",{className:"px-4 py-3 text-gray-600",children:[a.items.length," item",1!==a.items.length&&"s"]}),(0,b.jsx)("td",{className:"px-4 py-3 text-gray-600",children:a.tableNumber||"-"}),(0,b.jsxs)("td",{className:"px-4 py-3 font-medium text-gray-800",children:["$",a.total.toFixed(2)]}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("select",{value:a.status,onChange:b=>{b.stopPropagation(),w(a._id,b.target.value)},onClick:a=>a.stopPropagation(),disabled:t===a._id,className:`rounded-full px-2.5 py-0.5 text-xs font-medium capitalize ${(a=>{switch(a){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"preparing":return"bg-orange-100 text-orange-800";case"served":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(a.status)} cursor-pointer border-none focus:outline-none focus:ring-2 focus:ring-[#c47a5a]`,children:h.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`inline-block rounded-full px-2.5 py-0.5 text-xs font-medium ${a.isPaid?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.isPaid?"Paid":"Unpaid"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-xs text-gray-500",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-4 py-3",children:i[a.status]&&(0,b.jsxs)("button",{onClick:b=>{let c;b.stopPropagation(),(c=i[a.status])&&w(a._id,c)},disabled:t===a._id,className:"inline-flex items-center gap-1 rounded-lg bg-[#c47a5a]/10 px-3 py-1.5 text-xs font-medium text-[#c47a5a] transition-colors hover:bg-[#c47a5a]/20 disabled:opacity-50",children:[(0,b.jsx)(g.FiCheckCircle,{className:"h-3.5 w-3.5"}),i[a.status]]})})]},a._id),r===a._id&&(0,b.jsx)("tr",{className:"border-b border-gray-100",children:(0,b.jsx)("td",{colSpan:9,className:"bg-gray-50/50 px-4 py-4",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Order Items"}),(0,b.jsx)("div",{className:"space-y-2",children:a.items.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg bg-white px-4 py-2 shadow-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-gray-800",children:a.name}),(0,b.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["x",a.quantity]})]}),(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-800",children:["$",(a.price*a.quantity).toFixed(2)]})]},c))}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-6 rounded-lg bg-white px-4 py-3 text-sm shadow-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Subtotal: "}),(0,b.jsxs)("span",{className:"font-medium text-gray-800",children:["$",a.subtotal.toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Tax: "}),(0,b.jsxs)("span",{className:"font-medium text-gray-800",children:["$",a.tax.toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Total: "}),(0,b.jsxs)("span",{className:"font-semibold text-gray-800",children:["$",a.total.toFixed(2)]})]}),a.notes&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Notes: "}),(0,b.jsx)("span",{className:"text-gray-700",children:a.notes})]})]})]})})},`${a._id}-details`)]}))})]})}),l.pages>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing page ",l.page," of ",l.pages," (",l.total," orders)"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>m(a=>({...a,page:a.page-1})),disabled:l.page<=1,className:"rounded-lg border border-gray-200 p-2 text-gray-600 transition-colors hover:bg-gray-50 disabled:opacity-50",children:(0,b.jsx)(g.FiChevronLeft,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>m(a=>({...a,page:a.page+1})),disabled:l.page>=l.pages,className:"rounded-lg border border-gray-200 p-2 text-gray-600 transition-colors hover:bg-gray-50 disabled:opacity-50",children:(0,b.jsx)(g.FiChevronRight,{className:"h-4 w-4"})})]})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_app_%28dashboard%29_%28admin%29_admin_orders_page_tsx_ddf38476._.js.map