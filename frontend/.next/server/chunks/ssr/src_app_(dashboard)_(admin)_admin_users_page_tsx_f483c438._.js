module.exports=[80015,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19032),e=a.i(32636),f=a.i(6704),g=a.i(38246),h=a.i(27348);let i=["customer","staff","admin"],j=a=>{switch(a){case"admin":return"bg-red-100 text-red-700";case"staff":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-600"}};function k(){let{user:a}=(0,e.useAuth)(),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)({name:"",email:"",password:"",role:"customer"}),[A,B]=(0,c.useState)(!1);(0,c.useEffect)(()=>{C()},[]),(0,c.useEffect)(()=>{if(o.trim()){let a=o.toLowerCase();r(k.filter(b=>b.name.toLowerCase().includes(a)||b.email.toLowerCase().includes(a)||b.role.toLowerCase().includes(a)))}else r(k)},[o,k]);let C=async()=>{n(!0);try{let a=await d.default.get("/users");l(a.data.users||a.data||[])}catch{f.default.error("Failed to load users")}finally{n(!1)}},D=async(b,c)=>{if(b===a?._id)return void f.default.error("You cannot change your own role");t(b);try{await d.default.put(`/users/${b}/role`,{role:c}),l(a=>a.map(a=>a._id===b?{...a,role:c}:a)),f.default.success(`Role updated to ${c}`)}catch(a){f.default.error(a.response?.data?.message||"Failed to update role")}finally{t(null)}},E=async b=>{if(b===a?._id)return void f.default.error("You cannot delete your own account");if(!u){v(b);try{await d.default.delete(`/users/${b}`),f.default.success("User deleted"),l(a=>a.filter(a=>a._id!==b))}catch(a){f.default.error(a.response?.data?.message||"Failed to delete user")}finally{v(null)}}},F=async()=>{if(!y.name||!y.email||!y.password)return void f.default.error("All fields are required");B(!0);try{await d.default.post("/users",y),f.default.success("User created successfully"),x(!1),z({name:"",email:"",password:"",role:"customer"}),C()}catch(a){f.default.error(a.response?.data?.message||"Failed to create user")}finally{B(!1)}};return m?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[#c47a5a] border-t-transparent"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Users"}),(0,b.jsx)("p",{className:"mt-1 text-gray-500",children:"Manage user accounts and roles"})]}),(0,b.jsxs)("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 rounded-lg bg-[#c47a5a] px-4 py-2.5 text-sm font-medium text-white shadow-sm transition-colors hover:bg-[#b06a4a]",children:[(0,b.jsx)(h.FiPlus,{className:"h-4 w-4"}),"Create User"]})]}),(0,b.jsxs)("div",{className:"relative max-w-md",children:[(0,b.jsx)(h.FiSearch,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name, email, or role...",value:o,onChange:a=>p(a.target.value),className:"w-full rounded-lg border border-gray-200 py-2.5 pl-10 pr-4 text-sm focus:border-[#c47a5a] focus:outline-none focus:ring-1 focus:ring-[#c47a5a]"})]}),(0,b.jsx)("div",{className:"overflow-x-auto rounded-xl bg-white shadow-sm",children:(0,b.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"User"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Email"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Role"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Joined"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:0===q.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:5,className:"px-4 py-12 text-center text-gray-400",children:[(0,b.jsx)(h.FiUsers,{className:"mx-auto mb-2 h-10 w-10"}),(0,b.jsx)("p",{children:"No users found."})]})}):q.map(c=>{let d=c._id===a?._id,e="admin"===c.role?h.FiShield:h.FiUser;return(0,b.jsxs)("tr",{className:"border-b border-gray-50 hover:bg-gray-50/50 cursor-pointer",onClick:()=>window.location.href=`/admin/users/${c._id}`,children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)(g.default,{href:`/admin/users/${c._id}`,className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-[#c47a5a]/10",children:(0,b.jsx)(e,{className:"h-4 w-4 text-[#c47a5a]"})}),(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"font-medium text-gray-800",children:[c.name,d&&(0,b.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:"(you)"})]})})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-gray-600",children:c.email}),(0,b.jsx)("td",{className:"px-4 py-3",onClick:a=>a.stopPropagation(),children:d?(0,b.jsx)("span",{className:`inline-block rounded-full px-2.5 py-0.5 text-xs font-medium capitalize ${j(c.role)}`,children:c.role}):(0,b.jsx)("select",{value:c.role,onChange:a=>D(c._id,a.target.value),disabled:s===c._id,className:`rounded-full px-2.5 py-0.5 text-xs font-medium capitalize ${j(c.role)} cursor-pointer border-none focus:outline-none focus:ring-2 focus:ring-[#c47a5a]`,children:i.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})}),(0,b.jsx)("td",{className:"px-4 py-3 text-xs text-gray-500",children:new Date(c.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-4 py-3",onClick:a=>a.stopPropagation(),children:!d&&(0,b.jsx)("button",{onClick:()=>{confirm(`Are you sure you want to delete ${c.name}?`)&&E(c._id)},disabled:u===c._id,className:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-500 disabled:opacity-50",children:(0,b.jsx)(h.FiTrash2,{className:"h-4 w-4"})})})]},c._id)})})]})}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[q.length," user",1!==q.length&&"s"," total"]}),w&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"mx-4 w-full max-w-md rounded-xl bg-white p-6 shadow-lg",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Create User"}),(0,b.jsx)("button",{onClick:()=>x(!1),className:"rounded-lg p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:(0,b.jsx)(h.FiX,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Name"}),(0,b.jsx)("input",{type:"text",value:y.name,onChange:a=>z({...y,name:a.target.value}),placeholder:"Full name",className:"w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm focus:border-[#c47a5a] focus:outline-none focus:ring-1 focus:ring-[#c47a5a]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Email"}),(0,b.jsx)("input",{type:"email",value:y.email,onChange:a=>z({...y,email:a.target.value}),placeholder:"email@example.com",className:"w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm focus:border-[#c47a5a] focus:outline-none focus:ring-1 focus:ring-[#c47a5a]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Password"}),(0,b.jsx)("input",{type:"password",value:y.password,onChange:a=>z({...y,password:a.target.value}),placeholder:"Password",className:"w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm focus:border-[#c47a5a] focus:outline-none focus:ring-1 focus:ring-[#c47a5a]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Role"}),(0,b.jsxs)("select",{value:y.role,onChange:a=>z({...y,role:a.target.value}),className:"w-full rounded-lg border border-gray-200 px-3 py-2.5 text-sm focus:border-[#c47a5a] focus:outline-none focus:ring-1 focus:ring-[#c47a5a]",children:[(0,b.jsx)("option",{value:"customer",children:"Customer"}),(0,b.jsx)("option",{value:"staff",children:"Staff"}),(0,b.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>x(!1),className:"rounded-lg border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:F,disabled:A,className:"inline-flex items-center gap-2 rounded-lg bg-[#c47a5a] px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-[#b06a4a] disabled:opacity-50",children:A?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Creating..."]}):"Create User"})]})]})})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=src_app_%28dashboard%29_%28admin%29_admin_users_page_tsx_f483c438._.js.map