module.exports=[55296,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(19032),f=a.i(32636),g=a.i(6704),h=a.i(71987),i=a.i(38246),j=a.i(27348);let k=["customer","staff","admin"],l=a=>{switch(a){case"admin":return"bg-red-100 text-red-700";case"staff":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-600"}};function m(){let a=(0,d.useParams)();(0,d.useRouter)();let{user:m}=(0,f.useAuth)(),n=a.id,[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(!1);(0,c.useEffect)(()=>{n&&y()},[n]);let y=async()=>{t(!0),v("");try{let[a,b]=await Promise.all([e.default.get(`/users/${n}`),e.default.get(`/users/${n}/orders`).catch(()=>({data:{orders:[]}}))]);p(a.data.user||a.data),r(b.data.orders||b.data||[])}catch(a){v(a.response?.data?.message||"Failed to load user details"),g.default.error("Failed to load user details")}finally{t(!1)}},z=async a=>{if(o){if(o._id===m?._id)return void g.default.error("You cannot change your own role");x(!0);try{await e.default.put(`/users/${n}/role`,{role:a}),p(b=>b?{...b,role:a}:b),g.default.success(`Role updated to ${a}`)}catch(a){g.default.error(a.response?.data?.message||"Failed to update role")}finally{x(!1)}}};if(s)return(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[#c47a5a] border-t-transparent"})});if(u||!o)return(0,b.jsxs)("div",{className:"space-y-4 py-20 text-center",children:[(0,b.jsx)("p",{className:"text-gray-500",children:u||"User not found"}),(0,b.jsxs)(i.default,{href:"/admin/users",className:"inline-flex items-center gap-2 text-sm text-[#c47a5a] hover:underline",children:[(0,b.jsx)(j.FiArrowLeft,{className:"h-4 w-4"}),"Back to Users"]})]});let A=o._id===m?._id,B=o.name.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(i.default,{href:"/admin/users",className:"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-[#c47a5a] transition-colors",children:[(0,b.jsx)(j.FiArrowLeft,{className:"h-4 w-4"}),"Back to Users"]}),(0,b.jsx)("div",{className:"rounded-xl bg-white p-6 shadow-sm",children:(0,b.jsxs)("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:o.avatar?(0,b.jsx)(h.default,{src:(0,e.getImageUrl)(o.avatar),alt:o.name,width:80,height:80,className:"h-20 w-20 rounded-full object-cover"}):(0,b.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-[#c47a5a]/10 text-2xl font-bold text-[#c47a5a]",children:B})}),(0,b.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("h1",{className:"text-2xl font-bold text-gray-800",children:[o.name,A&&(0,b.jsx)("span",{className:"ml-2 text-sm font-normal text-gray-400",children:"(you)"})]})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(j.FiMail,{className:"h-4 w-4"}),o.email]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(j.FiCalendar,{className:"h-4 w-4"}),"Joined ",new Date(o.createdAt).toLocaleDateString()]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(j.FiShield,{className:"h-4 w-4 text-gray-400"}),A?(0,b.jsx)("span",{className:`inline-block rounded-full px-3 py-1 text-xs font-medium capitalize ${l(o.role)}`,children:o.role}):(0,b.jsx)("select",{value:o.role,onChange:a=>z(a.target.value),disabled:w,className:`rounded-full px-3 py-1 text-xs font-medium capitalize ${l(o.role)} cursor-pointer border-none focus:outline-none focus:ring-2 focus:ring-[#c47a5a] disabled:opacity-50`,children:k.map(a=>(0,b.jsx)("option",{value:a,children:a},a))}),w&&(0,b.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-[#c47a5a] border-t-transparent"})]})]})]})}),(0,b.jsxs)("div",{className:"rounded-xl bg-white shadow-sm",children:[(0,b.jsx)("div",{className:"border-b border-gray-100 px-6 py-4",children:(0,b.jsxs)("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[(0,b.jsx)(j.FiPackage,{className:"h-5 w-5 text-[#c47a5a]"}),"Order History",(0,b.jsxs)("span",{className:"ml-1 text-sm font-normal text-gray-400",children:["(",q.length,")"]})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,b.jsx)("th",{className:"px-6 py-3 font-medium text-gray-500",children:"Order ID"}),(0,b.jsx)("th",{className:"px-6 py-3 font-medium text-gray-500",children:"Items"}),(0,b.jsx)("th",{className:"px-6 py-3 font-medium text-gray-500",children:"Total"}),(0,b.jsx)("th",{className:"px-6 py-3 font-medium text-gray-500",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 font-medium text-gray-500",children:"Date"})]})}),(0,b.jsx)("tbody",{children:0===q.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400",children:[(0,b.jsx)(j.FiPackage,{className:"mx-auto mb-2 h-10 w-10"}),(0,b.jsx)("p",{children:"No orders found for this user."})]})}):q.map(a=>(0,b.jsxs)("tr",{className:"border-b border-gray-50 hover:bg-gray-50/50",children:[(0,b.jsx)("td",{className:"px-6 py-3 font-mono text-xs text-gray-600",children:a._id.slice(-8).toUpperCase()}),(0,b.jsxs)("td",{className:"px-6 py-3 text-gray-600",children:[a.items.length," item",1!==a.items.length&&"s"]}),(0,b.jsxs)("td",{className:"px-6 py-3 font-medium text-gray-800",children:["$",a.total.toFixed(2)]}),(0,b.jsx)("td",{className:"px-6 py-3",children:(0,b.jsx)("span",{className:`inline-block rounded-full px-2.5 py-0.5 text-xs font-medium capitalize ${(a=>{switch(a){case"pending":return"bg-yellow-100 text-yellow-700";case"confirmed":return"bg-blue-100 text-blue-700";case"preparing":return"bg-orange-100 text-orange-700";case"served":return"bg-purple-100 text-purple-700";case"completed":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-600"}})(a.status)}`,children:a.status})}),(0,b.jsx)("td",{className:"px-6 py-3 text-xs text-gray-500",children:new Date(a.createdAt).toLocaleDateString()})]},a._id))})]})})]})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=src_app_%28dashboard%29_%28admin%29_admin_users_%5Bid%5D_page_tsx_169274ab._.js.map