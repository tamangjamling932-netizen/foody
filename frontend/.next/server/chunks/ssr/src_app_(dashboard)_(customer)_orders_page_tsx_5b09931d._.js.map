{"version":3,"sources":["../../../../src/app/%28dashboard%29/%28customer%29/orders/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport API from \"@/lib/api\";\nimport { Order } from \"@/types\";\nimport toast from \"react-hot-toast\";\nimport {\n  FiClock,\n  FiPackage,\n  FiCheckCircle,\n  FiXCircle,\n  FiChevronRight,\n  FiShoppingBag,\n} from \"react-icons/fi\";\n\nconst STATUS_TABS = [\n  \"all\",\n  \"pending\",\n  \"confirmed\",\n  \"preparing\",\n  \"served\",\n  \"completed\",\n  \"cancelled\",\n] as const;\n\nconst STATUS_COLORS: Record<string, { bg: string; text: string; dot: string }> = {\n  pending: { bg: \"bg-yellow-50\", text: \"text-yellow-700\", dot: \"bg-yellow-500\" },\n  confirmed: { bg: \"bg-blue-50\", text: \"text-blue-700\", dot: \"bg-blue-500\" },\n  preparing: { bg: \"bg-orange-50\", text: \"text-orange-700\", dot: \"bg-orange-500\" },\n  served: { bg: \"bg-purple-50\", text: \"text-purple-700\", dot: \"bg-purple-500\" },\n  completed: { bg: \"bg-green-50\", text: \"text-green-700\", dot: \"bg-green-500\" },\n  cancelled: { bg: \"bg-red-50\", text: \"text-red-700\", dot: \"bg-red-500\" },\n};\n\nexport default function OrdersPage() {\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<string>(\"all\");\n\n  useEffect(() => {\n    fetchOrders();\n  }, []);\n\n  const fetchOrders = async () => {\n    setLoading(true);\n    try {\n      const res = await API.get(\"/orders/my-orders\");\n      setOrders(res.data.orders || []);\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || \"Failed to load orders\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredOrders =\n    activeTab === \"all\"\n      ? orders\n      : orders.filter((order) => order.status === activeTab);\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString(\"en-IN\", {\n      day: \"numeric\",\n      month: \"short\",\n      year: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  const getItemsCount = (order: Order) => {\n    return order.items.reduce((sum, item) => sum + item.quantity, 0);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"h-8 w-40 rounded bg-gray-200 animate-pulse\" />\n        <div className=\"flex gap-2 overflow-x-auto\">\n          {Array.from({ length: 7 }).map((_, i) => (\n            <div\n              key={i}\n              className=\"h-9 w-24 shrink-0 rounded-lg bg-gray-200 animate-pulse\"\n            />\n          ))}\n        </div>\n        <div className=\"space-y-4\">\n          {Array.from({ length: 4 }).map((_, i) => (\n            <div\n              key={i}\n              className=\"rounded-xl bg-white p-5 shadow-sm animate-pulse\"\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"space-y-2\">\n                  <div className=\"h-4 w-32 rounded bg-gray-200\" />\n                  <div className=\"h-3 w-48 rounded bg-gray-200\" />\n                  <div className=\"h-3 w-24 rounded bg-gray-200\" />\n                </div>\n                <div className=\"space-y-2 text-right\">\n                  <div className=\"ml-auto h-6 w-20 rounded-full bg-gray-200\" />\n                  <div className=\"ml-auto h-4 w-16 rounded bg-gray-200\" />\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-800\">My Orders</h1>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Track and manage your orders\n        </p>\n      </div>\n\n      {/* Status Filter Tabs */}\n      <div className=\"flex gap-2 overflow-x-auto pb-1\">\n        {STATUS_TABS.map((tab) => (\n          <button\n            key={tab}\n            onClick={() => setActiveTab(tab)}\n            className={`shrink-0 rounded-lg px-4 py-2 text-sm font-medium capitalize transition-colors ${\n              activeTab === tab\n                ? \"bg-[#c47a5a] text-white\"\n                : \"bg-white text-gray-600 shadow-sm hover:bg-gray-50\"\n            }`}\n          >\n            {tab}\n          </button>\n        ))}\n      </div>\n\n      {/* Orders List */}\n      {filteredOrders.length === 0 ? (\n        <div className=\"rounded-xl bg-white py-20 text-center shadow-sm\">\n          <FiShoppingBag className=\"mx-auto mb-4 h-16 w-16 text-gray-300\" />\n          <p className=\"text-lg font-medium text-gray-500\">\n            {activeTab === \"all\"\n              ? \"No orders yet\"\n              : `No ${activeTab} orders`}\n          </p>\n          <p className=\"mt-1 text-sm text-gray-400\">\n            {activeTab === \"all\"\n              ? \"Place your first order from the menu!\"\n              : \"Try checking a different status filter.\"}\n          </p>\n          {activeTab === \"all\" && (\n            <Link\n              href=\"/menu\"\n              className=\"mt-6 inline-flex items-center gap-2 rounded-xl bg-[#c47a5a] px-6 py-3 font-medium text-white transition-colors hover:bg-[#b56a4a]\"\n            >\n              <FiShoppingBag className=\"h-5 w-5\" />\n              Browse Menu\n            </Link>\n          )}\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {filteredOrders.map((order) => {\n            const colors = STATUS_COLORS[order.status];\n            return (\n              <Link\n                key={order._id}\n                href={`/orders/${order._id}`}\n                className=\"block rounded-xl bg-white p-5 shadow-sm transition-shadow hover:shadow-md\"\n              >\n                <div className=\"flex items-center justify-between gap-4\">\n                  <div className=\"min-w-0 flex-1 space-y-1.5\">\n                    {/* Order ID & Date */}\n                    <div className=\"flex flex-wrap items-center gap-2\">\n                      <span className=\"text-sm font-semibold text-gray-800\">\n                        #{order._id.slice(-6).toUpperCase()}\n                      </span>\n                      <span className=\"text-xs text-gray-400\">\n                        {formatDate(order.createdAt)}\n                      </span>\n                    </div>\n\n                    {/* Details Row */}\n                    <div className=\"flex flex-wrap items-center gap-3 text-xs text-gray-500\">\n                      {order.tableNumber && (\n                        <span className=\"flex items-center gap-1\">\n                          <FiPackage className=\"h-3.5 w-3.5\" />\n                          Table {order.tableNumber}\n                        </span>\n                      )}\n                      <span className=\"flex items-center gap-1\">\n                        <FiClock className=\"h-3.5 w-3.5\" />\n                        {getItemsCount(order)} item{getItemsCount(order) !== 1 ? \"s\" : \"\"}\n                      </span>\n                      <span className=\"font-semibold text-gray-700\">\n                        â‚¹{order.total.toFixed(2)}\n                      </span>\n                    </div>\n\n                    {/* Badges */}\n                    <div className=\"flex flex-wrap items-center gap-2\">\n                      <span\n                        className={`inline-flex items-center gap-1.5 rounded-full px-2.5 py-0.5 text-xs font-medium ${colors.bg} ${colors.text}`}\n                      >\n                        <span className={`h-1.5 w-1.5 rounded-full ${colors.dot}`} />\n                        {order.status.charAt(0).toUpperCase() + order.status.slice(1)}\n                      </span>\n                      <span\n                        className={`inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-medium ${\n                          order.isPaid\n                            ? \"bg-green-50 text-green-700\"\n                            : \"bg-gray-100 text-gray-500\"\n                        }`}\n                      >\n                        {order.isPaid ? (\n                          <FiCheckCircle className=\"h-3 w-3\" />\n                        ) : (\n                          <FiXCircle className=\"h-3 w-3\" />\n                        )}\n                        {order.isPaid ? \"Paid\" : \"Unpaid\"}\n                      </span>\n                    </div>\n                  </div>\n\n                  <FiChevronRight className=\"h-5 w-5 shrink-0 text-gray-400\" />\n                </div>\n              </Link>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}