module.exports=[30585,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19032),e=a.i(6704),f=a.i(27348);function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)({page:1,limit:10,total:0,pages:1}),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null);(0,c.useEffect)(()=>{n()},[h.page]);let n=async()=>{k(!0);try{let a=await d.default.get("/reviews",{params:{page:h.page,limit:h.limit}});g(a.data.reviews||a.data.data||[]),a.data.pagination&&i(a.data.pagination)}catch{e.default.error("Failed to load reviews")}finally{k(!1)}},o=async a=>{if(confirm("Are you sure you want to delete this review?")){m(a);try{await d.default.delete(`/reviews/${a}`),g(b=>b.filter(b=>b._id!==a)),e.default.success("Review deleted")}catch(a){e.default.error(a.response?.data?.message||"Failed to delete review")}finally{m(null)}}};return j&&0===a.length?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[#c47a5a] border-t-transparent"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Reviews"}),(0,b.jsx)("p",{className:"mt-1 text-gray-500",children:"Manage product reviews"})]}),(0,b.jsx)("div",{className:"overflow-x-auto rounded-xl bg-white shadow-sm",children:(0,b.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"User"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Product"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Rating"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Comment"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Date"}),(0,b.jsx)("th",{className:"px-4 py-3 font-medium text-gray-500",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:0===a.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:6,className:"px-4 py-12 text-center text-gray-400",children:[(0,b.jsx)(f.FiMessageSquare,{className:"mx-auto mb-2 h-10 w-10"}),(0,b.jsx)("p",{children:"No reviews found."})]})}):a.map(a=>(0,b.jsxs)("tr",{className:"border-b border-gray-50 hover:bg-gray-50/50",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-gray-800 font-medium",children:"object"==typeof a.user&&null!==a.user?a.user.name:"User"}),(0,b.jsx)("td",{className:"px-4 py-3 text-gray-600",children:"object"==typeof a.product&&null!==a.product?a.product.name||"Product":String(a.product).slice(-6).toUpperCase()}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(c=>(0,b.jsx)(f.FiStar,{size:14,className:c<=a.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"},c))})}),(0,b.jsx)("td",{className:"px-4 py-3 text-gray-600 max-w-xs",children:((a,b=60)=>a?a.length>b?a.slice(0,b)+"...":a:"â€”")(a.comment)}),(0,b.jsx)("td",{className:"px-4 py-3 text-xs text-gray-500",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("button",{onClick:()=>o(a._id),disabled:l===a._id,className:"inline-flex items-center gap-1 rounded-lg bg-red-50 px-3 py-1.5 text-xs font-medium text-red-700 transition-colors hover:bg-red-100 disabled:opacity-50",children:[(0,b.jsx)(f.FiTrash2,{className:"h-3.5 w-3.5"}),l===a._id?"Deleting...":"Delete"]})})]},a._id))})]})}),h.pages>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing page ",h.page," of ",h.pages," (",h.total," reviews)"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>i(a=>({...a,page:a.page-1})),disabled:h.page<=1,className:"rounded-lg border border-gray-200 p-2 text-gray-600 transition-colors hover:bg-gray-50 disabled:opacity-50",children:(0,b.jsx)(f.FiChevronLeft,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>i(a=>({...a,page:a.page+1})),disabled:h.page>=h.pages,className:"rounded-lg border border-gray-200 p-2 text-gray-600 transition-colors hover:bg-gray-50 disabled:opacity-50",children:(0,b.jsx)(f.FiChevronRight,{className:"h-4 w-4"})})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_app_%28dashboard%29_%28admin%29_admin_reviews_page_tsx_eb3d7ea5._.js.map