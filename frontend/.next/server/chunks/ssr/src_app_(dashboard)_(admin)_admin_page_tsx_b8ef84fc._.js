module.exports=[91557,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(32636),e=a.i(19032),f=a.i(50944),g=a.i(38246),h=a.i(27348);function i(){let{user:a}=(0,d.useAuth)();(0,f.useRouter)();let[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0),m=a?.role==="admin",n=a?.role==="staff";(0,c.useEffect)(()=>{o()},[]);let o=async()=>{try{let a=await e.default.get("/stats/dashboard");j(a.data.stats||a.data)}catch(a){console.error("Failed to load dashboard stats:",a)}finally{l(!1)}};if(k)return(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[var(--primary)] border-t-transparent"})});if(!i)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[(0,b.jsx)(h.FiTrendingUp,{className:"mb-3 h-12 w-12"}),(0,b.jsx)("p",{className:"text-lg font-medium",children:"Unable to load dashboard data"}),(0,b.jsx)("button",{onClick:o,className:"mt-4 rounded-lg bg-[var(--primary)] px-4 py-2 text-sm font-medium text-white hover:opacity-90",children:"Retry"})]});let p=[{label:"Total Orders",value:i.totalOrders??0,icon:h.FiShoppingBag,iconBg:"bg-[#c47a5a]/10",iconColor:"text-[#c47a5a]",show:!0},{label:"Today's Orders",value:i.todayOrders??0,icon:h.FiCalendar,iconBg:"bg-indigo-100",iconColor:"text-indigo-600",show:!0},{label:"Pending Orders",value:i.pendingOrders??0,icon:h.FiClock,iconBg:"bg-yellow-100",iconColor:"text-yellow-600",show:!0},{label:"Total Products",value:i.totalProducts??0,icon:h.FiBox,iconBg:"bg-blue-100",iconColor:"text-blue-600",show:!0},{label:"Total Users",value:i.totalUsers??0,icon:h.FiUsers,iconBg:"bg-purple-100",iconColor:"text-purple-600",show:m},{label:"Total Revenue",value:`₹${(i.totalRevenue??0).toLocaleString("en-IN",{minimumFractionDigits:2})}`,icon:h.FiDollarSign,iconBg:"bg-green-100",iconColor:"text-green-600",show:m},{label:"Total Bills",value:i.totalBills??0,icon:h.FiFileText,iconBg:"bg-rose-100",iconColor:"text-rose-600",show:m}],q=[{label:"Manage Orders",href:"/admin/orders",icon:h.FiShoppingBag,show:!0},{label:"Manage Products",href:"/admin/products",icon:h.FiPackage,show:!0},{label:"Manage Categories",href:"/admin/categories",icon:h.FiBox,show:!0},{label:"Manage Users",href:"/admin/users",icon:h.FiUsers,show:m},{label:"Manage Bills",href:"/admin/bills",icon:h.FiFileText,show:m},{label:"Manage Reviews",href:"/admin/reviews",icon:h.FiStar,show:m}],r=i.dailyOrders||[],s=i.ordersByStatus||{},t=i.topProducts||[];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-gray-800",children:[n?"Staff":"Admin"," Dashboard"]}),(0,b.jsxs)("p",{className:"mt-1 text-gray-500",children:["Welcome back, ",a?.name?.split(" ")[0]||"Admin",". Here's your overview."]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4",children:p.filter(a=>a.show).map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4 rounded-xl bg-white p-5 shadow-sm",children:[(0,b.jsx)("div",{className:`flex h-12 w-12 shrink-0 items-center justify-center rounded-lg ${a.iconBg}`,children:(0,b.jsx)(a.icon,{className:`h-6 w-6 ${a.iconColor}`})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"truncate text-sm text-gray-500",children:a.label}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:a.value})]})]},a.label))}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[r.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-4",children:"Orders This Week"}),(0,b.jsx)("div",{className:"h-48 flex items-end gap-2",children:r.map(a=>{let c=Math.max(...r.map(a=>a.count),1),d=a.count/c*100;return(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,b.jsx)("span",{className:"text-xs font-medium text-gray-600",children:a.count}),(0,b.jsx)("div",{className:"w-full bg-[var(--primary)] rounded-t-md transition-all min-h-[4px]",style:{height:`${d}%`}}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:a._id.slice(5)})]},a._id)})})]}),Object.keys(s).length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-4",children:"Order Status"}),(0,b.jsx)("div",{className:"space-y-3",children:Object.entries(s).map(([a,c])=>{let d=c/(i.totalOrders||1)*100;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"capitalize text-gray-600",children:a}),(0,b.jsx)("span",{className:"font-medium",children:c})]}),(0,b.jsx)("div",{className:"h-2.5 bg-gray-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full rounded-full transition-all",style:{width:`${d}%`,backgroundColor:{pending:"#f59e0b",confirmed:"#3b82f6",preparing:"#f97316",served:"#8b5cf6",completed:"#22c55e",cancelled:"#ef4444"}[a]||"#c47a5a"}})})]},a)})})]}),m&&t.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-4",children:"Top Products"}),(0,b.jsx)("div",{className:"space-y-3",children:t.map((a,c)=>{let d=t[0]?.totalQuantity||1;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600 truncate mr-2",children:a._id}),(0,b.jsxs)("span",{className:"font-medium text-[var(--primary)] whitespace-nowrap",children:[a.totalQuantity," sold"]})]}),(0,b.jsx)("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-[var(--primary)] rounded-full",style:{width:`${a.totalQuantity/d*100}%`}})})]},c)})})]}),m&&r.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-4",children:"Revenue This Week"}),(0,b.jsx)("div",{className:"h-48 flex items-end gap-2",children:r.map(a=>{let c=Math.max(...r.map(a=>a.revenue||0),1),d=a.revenue||0,e=d/c*100;return(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,b.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:["₹",d.toLocaleString("en-IN")]}),(0,b.jsx)("div",{className:"w-full bg-emerald-500 rounded-t-md transition-all min-h-[4px]",style:{height:`${e}%`}}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:a._id.slice(5)})]},a._id)})})]})]}),n&&(0,b.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Today's Orders"}),(0,b.jsxs)(g.default,{href:"/admin/orders",className:"flex items-center gap-1 text-sm font-medium text-[var(--primary)] hover:underline",children:["View All ",(0,b.jsx)(h.FiArrowRight,{className:"h-4 w-4"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-xl bg-indigo-100",children:(0,b.jsx)(h.FiCalendar,{className:"h-8 w-8 text-indigo-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:i.todayOrders??0}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"orders placed today"})]})]})]}),(0,b.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-800",children:"Quick Links"}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3",children:q.filter(a=>a.show).map(a=>(0,b.jsxs)(g.default,{href:a.href,className:"flex items-center justify-between rounded-lg border border-gray-100 p-3 transition-colors hover:bg-[var(--primary)]/5 hover:border-[var(--primary)]/20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(a.icon,{className:"h-5 w-5 text-[var(--primary)]"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:a.label})]}),(0,b.jsx)(h.FiArrowRight,{className:"h-4 w-4 text-gray-400"})]},a.label))})]})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=src_app_%28dashboard%29_%28admin%29_admin_page_tsx_b8ef84fc._.js.map