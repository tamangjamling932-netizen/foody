module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},32636,a=>{"use strict";var b=a.i(72131),c=a.i(19032);let d={user:null,loading:!0},e=new Set,f=!1;function g(a){d={...d,...a},e.forEach(a=>a())}function h(a,b,c){if("u"<typeof document)return;let d=new Date(Date.now()+864e5*c).toUTCString();document.cookie=`${a}=${b}; path=/; expires=${d}; SameSite=Lax`}function i(){let[,a]=(0,b.useState)(0);(0,b.useEffect)(()=>{let b=()=>a(a=>a+1);return e.add(b),f||(f=!0,g({loading:!1})),()=>{e.delete(b)}},[]);let i=(0,b.useCallback)(async(a,b)=>{let d=await c.default.post("/auth/login",{email:a,password:b}),e=d.data.token;return localStorage.setItem("token",e),h("token",e,7),g({user:d.data.user,loading:!1}),d.data},[]),j=(0,b.useCallback)(async(a,b,d)=>{let e=await c.default.post("/auth/register",{name:a,email:b,password:d}),f=e.data.token;return localStorage.setItem("token",f),h("token",f,7),g({user:e.data.user,loading:!1}),e.data},[]),k=(0,b.useCallback)(async()=>{await c.default.get("/auth/logout").catch(()=>{}),localStorage.removeItem("token"),"u">typeof document&&(document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),f=!1,g({user:null,loading:!1})},[]),l=(0,b.useCallback)(a=>{g({user:a,loading:!1})},[]);return{user:d.user,loading:d.loading,login:i,register:j,logout:k,setUser:l}}a.s(["useAuth",()=>i])},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},8591,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(72131);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},92434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},68063,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getDeploymentId:function(){return f},getDeploymentIdQueryOrEmptyString:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(){return!1}function g(){return""}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},11203,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(32636),f=a.i(38246),g=a.i(71987),h=a.i(27348);let i=[{label:"Dashboard",href:"/dashboard",icon:h.FiHome},{label:"Menu",href:"/menu",icon:h.FiGrid},{label:"Cart",href:"/cart",icon:h.FiShoppingCart},{label:"My Orders",href:"/orders",icon:h.FiPackage},{label:"Profile",href:"/profile",icon:h.FiUser}],j=[{label:"Dashboard",href:"/admin",icon:h.FiHome},{label:"Orders",href:"/admin/orders",icon:h.FiPackage},{label:"Products",href:"/admin/products",icon:h.FiBox},{label:"Categories",href:"/admin/categories",icon:h.FiTag},{label:"Profile",href:"/profile",icon:h.FiUser}],k=[{label:"Dashboard",href:"/admin",icon:h.FiHome},{label:"Orders",href:"/admin/orders",icon:h.FiPackage},{label:"Products",href:"/admin/products",icon:h.FiBox},{label:"Categories",href:"/admin/categories",icon:h.FiTag},{label:"Reviews",href:"/admin/reviews",icon:h.FiStar},{label:"Bills",href:"/admin/bills",icon:h.FiFileText},{label:"Users",href:"/admin/users",icon:h.FiUsers},{label:"Profile",href:"/profile",icon:h.FiUser}];function l({isOpen:a,onClose:c}){let l=(0,d.usePathname)(),{user:m,logout:n}=(0,e.useAuth)(),o=function(a){switch(a){case"admin":return k;case"staff":return j;default:return i}}(m?.role),p=async()=>{await n(),window.location.href="/login"},q=(0,b.jsxs)("div",{className:"flex h-full flex-col bg-card",children:[(0,b.jsxs)("div",{className:"flex h-16 items-center justify-between px-6",children:[(0,b.jsxs)(f.default,{href:m?.role==="customer"?"/dashboard":"/admin",className:"flex items-center gap-2",children:[(0,b.jsx)(g.default,{src:"/assets/images/logo.png",alt:"Foody Logo",width:36,height:36,className:"rounded-lg"}),(0,b.jsx)("span",{className:"text-xl font-bold text-primary",children:"Foody"})]}),(0,b.jsx)("button",{onClick:c,className:"rounded-lg p-1.5 text-text-muted hover:bg-bg hover:text-text md:hidden",children:(0,b.jsx)(h.FiX,{size:20})})]}),(0,b.jsx)("nav",{className:"flex-1 space-y-1 overflow-y-auto px-3 py-4",children:o.map(a=>{var d;let e=a.icon,g="/dashboard"===(d=a.href)||"/admin"===d?l===d:l.startsWith(d);return(0,b.jsxs)(f.default,{href:a.href,onClick:c,className:`flex items-center gap-3 rounded-xl px-4 py-2.5 text-sm font-medium transition-colors ${g?"bg-accent text-primary":"text-text-muted hover:bg-bg hover:text-text"}`,children:[(0,b.jsx)(e,{size:18}),(0,b.jsx)("span",{children:a.label})]},a.href)})}),(0,b.jsx)("div",{className:"border-t border-border p-3",children:(0,b.jsxs)("button",{onClick:p,className:"flex w-full items-center gap-3 rounded-xl px-4 py-2.5 text-sm font-medium text-text-muted transition-colors hover:bg-bg hover:text-text",children:[(0,b.jsx)(h.FiLogOut,{size:18}),(0,b.jsx)("span",{children:"Logout"})]})})]});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("aside",{className:"fixed inset-y-0 left-0 z-30 hidden w-[260px] border-r border-border md:block",children:q}),a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-40 bg-black/40 md:hidden",onClick:c}),(0,b.jsx)("aside",{className:"fixed inset-y-0 left-0 z-50 w-[260px] shadow-xl md:hidden",children:q})]})]})}var m=a.i(19032);function n({onMenuToggle:a}){let{user:c}=(0,e.useAuth)();return(0,b.jsxs)("header",{className:"sticky top-0 z-20 flex h-16 items-center justify-between border-b border-border bg-card px-4 md:px-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:a,className:"rounded-lg p-2 text-text-muted hover:bg-bg hover:text-text md:hidden",children:(0,b.jsx)(h.FiMenu,{size:20})}),(0,b.jsx)(g.default,{src:"/assets/images/logo.png",alt:"Foody Logo",width:32,height:32,className:"rounded-lg md:hidden"})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:c&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"hidden text-sm font-medium text-text sm:block",children:c.name}),(0,b.jsx)("span",{className:`rounded-full px-2.5 py-0.5 text-xs font-medium capitalize ${function(a){switch(a){case"admin":return"bg-red-100 text-red-700";case"staff":return"bg-blue-100 text-blue-700";default:return"bg-accent text-primary"}}(c.role)}`,children:c.role}),c.avatar?(0,b.jsx)(g.default,{src:(0,m.getImageUrl)(c.avatar),alt:c.name,width:36,height:36,className:"w-9 h-9 rounded-full object-cover",unoptimized:!0}):(0,b.jsx)("div",{className:"w-9 h-9 rounded-full bg-primary flex items-center justify-center text-white text-sm font-semibold",children:c.name.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2)})]})})]})}function o({children:a}){let{user:f,loading:g}=(0,e.useAuth)(),h=(0,d.useRouter)(),[i,j]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{g||f||h.replace("/login")},[g,f,h]),g||!f)?(0,b.jsx)("div",{className:"flex h-screen items-center justify-center bg-bg",children:(0,b.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):(0,b.jsxs)("div",{className:"min-h-screen bg-bg",children:[(0,b.jsx)(l,{isOpen:i,onClose:()=>j(!1)}),(0,b.jsxs)("div",{className:"md:ml-[260px]",children:[(0,b.jsx)(n,{onMenuToggle:()=>j(a=>!a)}),(0,b.jsx)("main",{className:"p-4 md:p-6",children:a})]})]})}a.s(["default",()=>o],11203)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e1ad3b83._.js.map