{"version":3,"sources":["../../../../src/app/%28dashboard%29/%28customer%29/menu/%5Bid%5D/page.tsx","../../../../src/schemas/review.schema.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport API from \"@/lib/api\";\nimport { getImageUrl } from \"@/lib/api\";\nimport { Product } from \"@/types\";\nimport toast from \"react-hot-toast\";\nimport {\n  FiArrowLeft,\n  FiStar,\n  FiShoppingCart,\n  FiMinus,\n  FiPlus,\n  FiSend,\n  FiUser,\n} from \"react-icons/fi\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { reviewSchema, ReviewInput } from \"@/schemas/review.schema\";\nimport { Review } from \"@/types\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport default function ProductDetailPage() {\n  const params = useParams();\n  const router = useRouter();\n  const { user } = useAuth();\n  const id = params.id as string;\n\n  const [product, setProduct] = useState<Product | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [quantity, setQuantity] = useState(1);\n  const [addingToCart, setAddingToCart] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(\"\");\n  const [reviews, setReviews] = useState<Review[]>([]);\n  const [reviewsLoading, setReviewsLoading] = useState(true);\n  const [myReview, setMyReview] = useState<Review | null>(null);\n  const [canReview, setCanReview] = useState(false);\n  const [submittingReview, setSubmittingReview] = useState(false);\n  const [selectedRating, setSelectedRating] = useState(0);\n  const [hoverRating, setHoverRating] = useState(0);\n\n  const { register: regReview, handleSubmit: handleReview, formState: { errors: reviewErrors }, reset: resetReview } = useForm<ReviewInput>({\n    resolver: zodResolver(reviewSchema),\n  });\n\n  useEffect(() => {\n    if (id) fetchProduct();\n  }, [id]);\n\n  const fetchProduct = async () => {\n    setLoading(true);\n    try {\n      const res = await API.get(`/products/${id}`);\n      const prod = res.data.product || res.data;\n      setProduct(prod);\n      setSelectedImage(prod.image || \"\");\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || \"Failed to load product\");\n      router.push(\"/menu\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddToCart = async () => {\n    if (!product) return;\n    setAddingToCart(true);\n    try {\n      await API.post(\"/cart/add\", { productId: product._id, quantity });\n      toast.success(`${product.name} added to cart!`);\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || \"Failed to add to cart\");\n    } finally {\n      setAddingToCart(false);\n    }\n  };\n\n  // Fetch reviews\n  useEffect(() => {\n    if (!params.id) return;\n    const fetchReviews = async () => {\n      try {\n        const res = await API.get(`/reviews/product/${params.id}`);\n        setReviews(res.data.reviews || []);\n        // Check if user already reviewed\n        if (user) {\n          const existing = (res.data.reviews || []).find((r: Review) => {\n            const reviewUser = typeof r.user === 'object' ? r.user._id : r.user;\n            return reviewUser === user._id;\n          });\n          if (existing) setMyReview(existing);\n        }\n      } catch {}\n      setReviewsLoading(false);\n    };\n    fetchReviews();\n\n    // Check if user can review (has completed order with this product)\n    if (user) {\n      API.get('/orders/my-orders').then(res => {\n        const orders = res.data.orders || [];\n        const hasCompleted = orders.some((o: any) =>\n          ['completed', 'served'].includes(o.status) &&\n          o.items.some((i: any) => i.product === params.id)\n        );\n        setCanReview(hasCompleted);\n      }).catch(() => {});\n    }\n  }, [params.id, user]);\n\n  const onReviewSubmit = async (data: ReviewInput) => {\n    if (selectedRating === 0) {\n      toast.error('Please select a rating');\n      return;\n    }\n    try {\n      setSubmittingReview(true);\n      const res = await API.post(`/reviews/product/${params.id}`, {\n        rating: selectedRating,\n        comment: data.comment || '',\n      });\n      setReviews(prev => [res.data.review, ...prev]);\n      setMyReview(res.data.review);\n      resetReview();\n      setSelectedRating(0);\n      toast.success('Review submitted!');\n      // Refresh product to get updated rating\n      const prodRes = await API.get(`/products/${params.id}`);\n      setProduct(prodRes.data.product);\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Failed to submit review');\n    } finally {\n      setSubmittingReview(false);\n    }\n  };\n\n  const getCategoryName = (): string => {\n    if (!product) return \"\";\n    if (typeof product.category === \"object\" && product.category !== null) {\n      return product.category.name;\n    }\n    return \"\";\n  };\n\n  const allImages = product\n    ? [product.image, ...(product.images || [])].filter(Boolean)\n    : [];\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"h-6 w-32 rounded bg-gray-200 animate-pulse\" />\n        <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-2\">\n          <div className=\"h-96 rounded-xl bg-gray-200 animate-pulse\" />\n          <div className=\"space-y-4\">\n            <div className=\"h-8 w-3/4 rounded bg-gray-200 animate-pulse\" />\n            <div className=\"h-4 w-1/4 rounded bg-gray-200 animate-pulse\" />\n            <div className=\"h-20 w-full rounded bg-gray-200 animate-pulse\" />\n            <div className=\"h-10 w-32 rounded bg-gray-200 animate-pulse\" />\n            <div className=\"h-12 w-48 rounded bg-gray-200 animate-pulse\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className=\"py-20 text-center\">\n        <p className=\"text-lg text-gray-500\">Product not found.</p>\n        <Link\n          href=\"/menu\"\n          className=\"mt-4 inline-flex items-center gap-2 text-[#c47a5a] hover:underline\"\n        >\n          <FiArrowLeft className=\"h-4 w-4\" />\n          Back to Menu\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Back Link */}\n      <Link\n        href=\"/menu\"\n        className=\"inline-flex items-center gap-2 text-sm font-medium text-gray-500 transition-colors hover:text-[#c47a5a]\"\n      >\n        <FiArrowLeft className=\"h-4 w-4\" />\n        Back to Menu\n      </Link>\n\n      <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-2\">\n        {/* Image Section */}\n        <div className=\"space-y-4\">\n          <div className=\"relative h-80 w-full overflow-hidden rounded-xl bg-gray-100 sm:h-96\">\n            <Image\n              src={getImageUrl(selectedImage)}\n              alt={product.name}\n              width={800}\n              height={600}\n              unoptimized\n              className=\"h-full w-full object-cover\"\n            />\n            {/* Veg/Non-veg Badge */}\n            <span\n              className={`absolute left-3 top-3 inline-flex h-6 w-6 items-center justify-center rounded-sm border-2 bg-white ${\n                product.isVeg ? \"border-green-500\" : \"border-red-500\"\n              }`}\n            >\n              <span\n                className={`h-2.5 w-2.5 rounded-full ${\n                  product.isVeg ? \"bg-green-500\" : \"bg-red-500\"\n                }`}\n              />\n            </span>\n\n            {!product.isAvailable && (\n              <div className=\"absolute inset-0 flex items-center justify-center bg-black/50\">\n                <span className=\"rounded-full bg-white px-4 py-2 text-sm font-semibold text-gray-700\">\n                  Currently Unavailable\n                </span>\n              </div>\n            )}\n          </div>\n\n          {/* Thumbnail Gallery */}\n          {allImages.length > 1 && (\n            <div className=\"flex gap-2 overflow-x-auto pb-1\">\n              {allImages.map((img, i) => (\n                <button\n                  key={i}\n                  onClick={() => setSelectedImage(img)}\n                  className={`shrink-0 h-16 w-16 overflow-hidden rounded-lg border-2 transition-colors ${\n                    selectedImage === img\n                      ? \"border-[#c47a5a]\"\n                      : \"border-transparent hover:border-gray-300\"\n                  }`}\n                >\n                  <Image\n                    src={getImageUrl(img)}\n                    alt={`${product.name} ${i + 1}`}\n                    width={64}\n                    height={64}\n                    unoptimized\n                    className=\"h-full w-full object-cover\"\n                  />\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Product Info */}\n        <div className=\"space-y-5\">\n          {/* Name & Category */}\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-800 sm:text-3xl\">\n              {product.name}\n            </h1>\n            {getCategoryName() && (\n              <p className=\"mt-1 text-sm text-gray-400\">{getCategoryName()}</p>\n            )}\n          </div>\n\n          {/* Rating */}\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex items-center gap-1\">\n              {Array.from({ length: 5 }).map((_, i) => (\n                <FiStar\n                  key={i}\n                  className={`h-5 w-5 ${\n                    i < Math.round(product.rating)\n                      ? \"fill-yellow-400 text-yellow-400\"\n                      : \"text-gray-300\"\n                  }`}\n                />\n              ))}\n            </div>\n            <span className=\"text-sm font-medium text-gray-600\">\n              {product.rating.toFixed(1)}\n            </span>\n            <span className=\"text-sm text-gray-400\">\n              ({product.numReviews} review{product.numReviews !== 1 ? \"s\" : \"\"})\n            </span>\n          </div>\n\n          {/* Veg/Non-veg Indicator */}\n          <div className=\"flex items-center gap-2\">\n            <span\n              className={`inline-flex h-5 w-5 items-center justify-center rounded-sm border-2 ${\n                product.isVeg ? \"border-green-500\" : \"border-red-500\"\n              }`}\n            >\n              <span\n                className={`h-2 w-2 rounded-full ${\n                  product.isVeg ? \"bg-green-500\" : \"bg-red-500\"\n                }`}\n              />\n            </span>\n            <span\n              className={`text-sm font-medium ${\n                product.isVeg ? \"text-green-600\" : \"text-red-600\"\n              }`}\n            >\n              {product.isVeg ? \"Vegetarian\" : \"Non-Vegetarian\"}\n            </span>\n          </div>\n\n          {/* Price */}\n          <p className=\"text-3xl font-bold text-gray-800\">\n            â‚¹{product.price.toFixed(2)}\n          </p>\n\n          {/* Description */}\n          {product.description && (\n            <div>\n              <h3 className=\"text-sm font-semibold text-gray-700\">\n                Description\n              </h3>\n              <p className=\"mt-1 text-sm leading-relaxed text-gray-500\">\n                {product.description}\n              </p>\n            </div>\n          )}\n\n          {/* Quantity Selector */}\n          <div className=\"flex items-center gap-4\">\n            <span className=\"text-sm font-medium text-gray-700\">Quantity:</span>\n            <div className=\"flex items-center rounded-lg border border-gray-200\">\n              <button\n                onClick={() => setQuantity((q) => Math.max(1, q - 1))}\n                disabled={quantity <= 1}\n                className=\"flex h-10 w-10 items-center justify-center text-gray-600 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-40\"\n              >\n                <FiMinus className=\"h-4 w-4\" />\n              </button>\n              <span className=\"flex h-10 w-12 items-center justify-center border-x border-gray-200 text-sm font-semibold text-gray-800\">\n                {quantity}\n              </span>\n              <button\n                onClick={() => setQuantity((q) => Math.min(20, q + 1))}\n                disabled={quantity >= 20}\n                className=\"flex h-10 w-10 items-center justify-center text-gray-600 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-40\"\n              >\n                <FiPlus className=\"h-4 w-4\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Add to Cart Button */}\n          <button\n            onClick={handleAddToCart}\n            disabled={!product.isAvailable || addingToCart}\n            className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-[#c47a5a] px-6 py-3.5 text-base font-semibold text-white transition-colors hover:bg-[#b56a4a] disabled:cursor-not-allowed disabled:opacity-50 sm:w-auto\"\n          >\n            {addingToCart ? (\n              <span className=\"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent\" />\n            ) : (\n              <FiShoppingCart className=\"h-5 w-5\" />\n            )}\n            {addingToCart\n              ? \"Adding...\"\n              : !product.isAvailable\n              ? \"Unavailable\"\n              : \"Add to Cart\"}\n          </button>\n        </div>\n      </div>\n\n      {/* Reviews Section */}\n      <div className=\"mt-8 bg-white rounded-xl shadow-sm p-6\">\n        <h2 className=\"text-xl font-bold mb-6\">Reviews & Ratings</h2>\n\n        {/* Write Review Form - only if can review and hasn't already */}\n        {user && canReview && !myReview && (\n          <div className=\"mb-8 border border-gray-100 rounded-lg p-5 bg-gray-50\">\n            <h3 className=\"text-sm font-semibold text-gray-700 mb-3\">Write a Review</h3>\n            <form onSubmit={handleReview(onReviewSubmit)}>\n              {/* Star Rating Selector */}\n              <div className=\"flex items-center gap-1 mb-3\">\n                {[1, 2, 3, 4, 5].map((star) => (\n                  <button\n                    key={star}\n                    type=\"button\"\n                    onClick={() => setSelectedRating(star)}\n                    onMouseEnter={() => setHoverRating(star)}\n                    onMouseLeave={() => setHoverRating(0)}\n                    className=\"focus:outline-none\"\n                  >\n                    <FiStar\n                      size={24}\n                      className={`transition-colors ${\n                        star <= (hoverRating || selectedRating)\n                          ? 'fill-yellow-400 text-yellow-400'\n                          : 'text-gray-300'\n                      }`}\n                    />\n                  </button>\n                ))}\n                {selectedRating > 0 && (\n                  <span className=\"text-sm text-gray-500 ml-2\">{selectedRating}/5</span>\n                )}\n              </div>\n\n              {/* Comment */}\n              <textarea\n                {...regReview(\"comment\")}\n                placeholder=\"Share your experience (optional)\"\n                rows={3}\n                className=\"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--primary)]/20 focus:border-[var(--primary)] resize-none text-sm\"\n              />\n              {reviewErrors.comment && (\n                <p className=\"text-red-500 text-xs mt-1\">{reviewErrors.comment.message}</p>\n              )}\n\n              <button\n                type=\"submit\"\n                disabled={submittingReview || selectedRating === 0}\n                className=\"mt-3 flex items-center gap-2 px-5 py-2 bg-[var(--primary)] text-white rounded-lg text-sm font-medium hover:opacity-90 disabled:opacity-50 transition-opacity\"\n              >\n                <FiSend size={14} />\n                {submittingReview ? 'Submitting...' : 'Submit Review'}\n              </button>\n            </form>\n          </div>\n        )}\n\n        {/* My Review */}\n        {myReview && (\n          <div className=\"mb-6 border border-[var(--primary)]/20 rounded-lg p-4 bg-[var(--primary)]/5\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <span className=\"text-sm font-medium text-[var(--primary)]\">Your Review</span>\n              <div className=\"flex\">\n                {[1,2,3,4,5].map(s => (\n                  <FiStar key={s} size={14} className={s <= myReview.rating ? 'fill-yellow-400 text-yellow-400' : 'text-gray-300'} />\n                ))}\n              </div>\n            </div>\n            {myReview.comment && <p className=\"text-sm text-gray-600\">{myReview.comment}</p>}\n          </div>\n        )}\n\n        {/* Reviews List */}\n        {reviewsLoading ? (\n          <div className=\"space-y-4\">\n            {[1,2,3].map(i => (\n              <div key={i} className=\"animate-pulse flex gap-3\">\n                <div className=\"w-10 h-10 bg-gray-200 rounded-full\" />\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"h-4 bg-gray-200 rounded w-1/4\" />\n                  <div className=\"h-3 bg-gray-200 rounded w-3/4\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : reviews.length === 0 ? (\n          <p className=\"text-gray-400 text-sm text-center py-8\">No reviews yet. Be the first to review!</p>\n        ) : (\n          <div className=\"space-y-4\">\n            {reviews.map((review) => {\n              const reviewUser = typeof review.user === 'object' ? review.user : null;\n              return (\n                <div key={review._id} className=\"flex gap-3 pb-4 border-b border-gray-100 last:border-0\">\n                  <div className=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0\">\n                    {reviewUser?.avatar ? (\n                      <Image src={getImageUrl(reviewUser.avatar)} alt=\"\" width={40} height={40} className=\"w-full h-full rounded-full object-cover\" unoptimized />\n                    ) : (\n                      <FiUser size={16} className=\"text-gray-400\" />\n                    )}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"text-sm font-medium\">{reviewUser?.name || 'User'}</span>\n                      <div className=\"flex\">\n                        {[1,2,3,4,5].map(s => (\n                          <FiStar key={s} size={12} className={s <= review.rating ? 'fill-yellow-400 text-yellow-400' : 'text-gray-300'} />\n                        ))}\n                      </div>\n                      <span className=\"text-xs text-gray-400\">{new Date(review.createdAt).toLocaleDateString()}</span>\n                    </div>\n                    {review.comment && <p className=\"text-sm text-gray-600\">{review.comment}</p>}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { z } from \"zod\";\n\nexport const reviewSchema = z.object({\n  comment: z.string().max(500, \"Comment cannot exceed 500 characters\").optional(),\n});\n\nexport type ReviewInput = z.infer<typeof reviewSchema>;\n"],"names":[],"mappings":"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"}